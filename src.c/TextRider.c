/* file generated by oo2c -- do not edit */
#include "__oo2c.h"
#include "__libc.h"
#include "TextRider.d"

static _ModId _mid;

Msg__Msg TextRider__GetError(int code) {
  register int i0;
  i0 = (int)TextRider__errorContext;
  i0 = (int)Msg__New((Msg__Context)i0, (int)code);
  return (void*)i0;
}

void TextRider__ErrorContextDesc_GetTemplate(TextRider__ErrorContext context, Msg__Msg msg, Msg__LString templ, int templ_0d) {
  register int i0;
  unsigned char str[128];
  i0 = (int)msg + 8;
  i0 = *(int*)i0;
  if (!(i0<=0 || i0>=2)) goto l0;
  (void)memcpy((void*) (int)str, (const void*) (int)_c0, 1);
  Msg__ContextDesc_GetTemplate((Msg__Context)(int)context, (Msg__Msg)(int)msg, (Msg__LString)(int)templ, templ_0d);
  goto l1;
l0:
  if (!(i0==1)) goto l1;
  (void)memcpy((void*) (int)str, (const void*) (int)_c1, 46);
l1:
  i0 = strcmp((const char*) (int)str, (const char*) (int)_c0) != 0;
  if (!(i0)) goto l2;
  _string_copy2l((int)templ, (int)str, templ_0d);
l2:
  ;
}

void TextRider__EolDetect(TextRider__Reader r, unsigned char ch) {
  register int i0, i1, i2;
  i0 = (int)*(void**)(int)r;
  i0 = i0 != 0;
  if (i0) goto l4;
  i2 = (int)r + 20;
  i1 = *(unsigned char*)i2;
  if (i1) goto l1;
  i1 = (int)r + 16;
  i0 = (int)ch == 10;
  *(unsigned char*)i1 = (int)ch;
  if (i0) goto l0;
  *(unsigned char*)i2 = 1;
  goto l4;
l0:
  i1 = (int)r + 18;
  *(short int*)i1 = 1;
  goto l4;
l1:
  i1 = (int)ch == 10;
  if (i1) goto l2;
  i1 = (int)r + 18;
  *(short int*)i1 = 1;
  goto l3;
l2:
  i1 = (int)r + 16;
  i0 = i1 + 1;
  *(unsigned char*)i0 = 10;
  i0 = (int)r + 18;
  *(short int*)i0 = 2;
l3:
  *(unsigned char*)i2 = 0;
l4:
  ;
}

unsigned char TextRider__Lookahead(TextRider__Reader r, short int len) {
  register int i0, i1, i2, i3, i4, i5, i6, i7, i8, i9;
  unsigned char ch;
  i8 = (int)r + 32;
  i7 = *(short int*)i8;
  i0 = i7 == 0;
  if (i0) goto l0;
  i2 = i7 - 1;
  i0 = (int)r + 24;
  i1 = (int)_ashl(i2, 2, (unsigned int));
  i1 = i0 + i1;
  i2 = (int)*(void**)i1;
  i2 = i2 != 0;
  if (i2) goto l4;
l0:
  i7 = len > i7;
  if (!(i7)) goto l4;
  i0 = (int)r + 8;
  i1 = (int)*(void**)i0;
  i1 += 4;
  i1 = (int)*(void**)i1;
  i6 = i1 != 0;
  if (i6) goto l4;
  i2 = (int)r + 21;
  i1 = (int)r + 24;
  i3 = (int)r + 18;
  i7 = (int)r + 20;
l1:
  i5 = (int)*(void**)i0;
  i9 = *(int*)(i5-4);
  i9 = (int)((_Type)i9)->tbprocs[3];
  ch = (unsigned char)i4;
  ch = (unsigned char)i4;
  ((void(*)(Channel__Reader, unsigned char *))i9)((Channel__Reader)i5, (unsigned char *)(int)&ch);
  i4 = *(short int*)i3;
  i4 = i4 >= 0;
  if (i4) goto l3;
  i4 = *(unsigned char*)i7;
  if (i4) goto l2;
  i4 = (int)ch == 10;
  if (i4) goto l2;
  i4 = (int)ch != 13;
  if (i4) goto l3;
l2:
  TextRider__EolDetect((TextRider__Reader)(int)r, (unsigned char)(int)ch);
l3:
  i5 = *(short int*)i8;
  i4 = i5 + i2;
  *(unsigned char*)i4 = (int)ch;
  i4 = *(short int*)i8;
  i9 = (int)*(void**)i0;
  i5 = (int)_ashl(i4, 2, (unsigned int));
  i9 += 4;
  i5 = i1 + i5;
  i9 = (int)*(void**)i9;
  *(void**)i5 = (void*)i9;
  i4 = *(short int*)i8;
  i4++;
  *(short int*)i8 = i4;
  i4 = *(short int*)i8;
  i4 = len <= i4;
  if (i4) goto l4;
  i4 = (int)*(void**)i0;
  i4 += 4;
  i4 = (int)*(void**)i4;
  i4 = i4 != 0;
  if (i4) goto l4;
  i4 = (int)ch;
  goto l1;
l4:
  i0 = *(short int*)i8;
  i0 = len > i0;
  if (i0) goto l5;
  i1 = len - 1;
  i2 = (int)r + 24;
  i0 = (int)_ashl(i1, 2, (unsigned int));
  i2 += i0;
  i1 = (int)*(void**)i2;
  i1 = i1 == 0;
  if (i1) goto l6;
l5:
  i0 = 0;
  goto l7;
l6:
  i0 = 1;
l7:
  return (unsigned char)i0;
}

unsigned char TextRider__Consume(TextRider__Reader r) {
  register int i0, i1, i2, i3, i4, i5, i6, i7, i8, i9;
  unsigned char ch;
  i0 = (int)*(void**)(int)r;
  i0 = i0 == 0;
  if (i0) goto l0;
  i9 = 0;
  goto l7;
l0:
  i0 = (int)r + 32;
  i8 = *(short int*)i0;
  i8 = i8 > 0;
  if (i8) goto l4;
  i9 = (int)r + 8;
  i7 = (int)*(void**)i9;
  i8 = *(int*)(i7-4);
  i8 = (int)((_Type)i8)->tbprocs[3];
  ((void(*)(Channel__Reader, unsigned char *))i8)((Channel__Reader)i7, (unsigned char *)(int)&ch);
  i9 = (int)*(void**)i9;
  i9 += 4;
  i7 = (int)*(void**)i9;
  i9 = i7 != 0;
  if (i9) goto l3;
  i9 = (int)r + 18;
  i9 = *(short int*)i9;
  i9 = i9 >= 0;
  if (i9) goto l2;
  i9 = (int)r + 20;
  i9 = *(unsigned char*)i9;
  if (i9) goto l1;
  i9 = (int)ch == 10;
  if (i9) goto l1;
  i9 = (int)ch != 13;
  if (i9) goto l2;
l1:
  TextRider__EolDetect((TextRider__Reader)(int)r, (unsigned char)(int)ch);
l2:
  i9 = (int)ch;
  goto l7;
l3:
  *(void**)(int)r = (void*)i7;
  i9 = 0;
  goto l7;
l4:
  i6 = (int)r + 24;
  i5 = (int)r + 21;
  i1 = (int)*(void**)i6;
  *(void**)(int)r = (void*)i1;
  i1 = *(short int*)i0;
  i7 = i1 - 1;
  i1 = i7 < 1;
  i9 = *(unsigned char*)i5;
  if (i1) goto l6;
  i1 = 1;
l5:
  i2 = i1 - 1;
  i3 = i1 + i5;
  i8 = i2 + i5;
  i3 = *(unsigned char*)i3;
  *(unsigned char*)i8 = i3;
  i8 = (int)_ashl(i1, 2, (unsigned int));
  i8 = i6 + i8;
  i3 = (int)_ashl(i2, 2, (unsigned int));
  i3 = i6 + i3;
  i4 = i1 + 1;
  i1 = (int)*(void**)i8;
  *(void**)i3 = (void*)i1;
  i1 = i4 > i7;
  if (i1) goto l6;
  i1 = i4;
  goto l5;
l6:
  i1 = *(short int*)i0;
  i1--;
  *(short int*)i0 = i1;
l7:
  return (unsigned char)i9;
}

int TextRider__ReaderDesc_Pos(TextRider__Reader r) {
  register int i0, i1;
  i0 = (int)r + 8;
  i0 = (int)*(void**)i0;
  i1 = *(int*)(i0-4);
  i1 = (int)((_Type)i1)->tbprocs[0];
  i0 = ((int(*)(Channel__Reader))i1)((Channel__Reader)i0);
  i1 = (int)r + 32;
  i1 = *(short int*)i1;
  i0 -= i1;
  return (int)i0;
}

void TextRider__ReaderDesc_ClearError(TextRider__Reader r) {
  register int i0, i1;
  i0 = (int)r + 8;
  i0 = (int)*(void**)i0;
  i1 = *(int*)(i0-4);
  i1 = (int)((_Type)i1)->tbprocs[5];
  ((void(*)(Channel__Reader))i1)((Channel__Reader)i0);
  i0 = (int)r + 20;
  *(void**)(int)r = (void*)0;
  *(unsigned char*)i0 = 0;
}

int TextRider__ReaderDesc_Available(TextRider__Reader r) {
  register int i0, i1, i2, i3, i4, i5;
  i0 = (int)r + 8;
  i0 = (int)*(void**)i0;
  i1 = *(int*)(i0-4);
  i1 = (int)((_Type)i1)->tbprocs[1];
  i0 = ((int(*)(Channel__Reader))i1)((Channel__Reader)i0);
  i1 = (int)r + 32;
  i4 = *(short int*)i1;
  i1 = i4 == 0;
  if (i1) goto l1;
  i1 = (int)r + 24;
  i3 = (int)*(void**)i1;
  i2 = i3 != 0;
  if (i2) goto l1;
  i5 = 0;
l0:
  i5++;
  i3 = i4 == i5;
  if (i3) goto l2;
  i3 = (int)_ashl(i5, 2, (unsigned int));
  i3 = i1 + i3;
  i3 = (int)*(void**)i3;
  i3 = i3 == 0;
  if (i3) goto l0;
  goto l2;
l1:
  i5 = 0;
l2:
  i1 = i0 < 0;
  if (!(i1)) goto l3;
  i1 = i5 > 0;
  if (i1) goto l4;
l3:
  i1 = i0 + i5;
  i5 = i1;
l4:
  return (int)i5;
}

void TextRider__ReaderDesc_SetPos(TextRider__Reader r, int newPos) {
  register int i0, i1, i2;
  i0 = (int)*(void**)(int)r;
  i0 = i0 != 0;
  if (i0) goto l0;
  i1 = (int)r + 8;
  i2 = (int)*(void**)i1;
  i0 = *(int*)(i2-4);
  i0 = (int)((_Type)i0)->tbprocs[2];
  ((void(*)(Channel__Reader, int))i0)((Channel__Reader)i2, (int)newPos);
  i2 = (int)r + 32;
  *(short int*)i2 = 0;
  i2 = (int)r + 20;
  *(unsigned char*)i2 = 0;
  i1 = (int)*(void**)i1;
  i1 += 4;
  i1 = (int)*(void**)i1;
  *(void**)(int)r = (void*)i1;
l0:
  ;
}

void TextRider__ReaderDesc_SetOpts(TextRider__Reader r, unsigned int opts) {
  register int i0;
  i0 = (int)r + 4;
  *(unsigned int*)i0 = opts;
}

void TextRider__ReaderDesc_SetEol(TextRider__Reader r, const unsigned char* marker__ref, int marker_0d, short int markerLen) {
  register int i0, i1, i2, i3, i4, i5, i6;
  unsigned char* marker;
  char* _old_top_vs = _top_vs;
  _push_value(int, marker, marker__ref, marker_0d);
  i0 = (int)*(void**)(int)r;
  i0 = i0 != 0;
  if (i0) goto l5;
  i5 = markerLen >= 1;
  if (i5) goto l0;
  i5 = markerLen != -1;
  if (i5) goto l4;
l0:
  i5 = markerLen > 2;
  if (i5) goto l4;
  i1 = markerLen - 1;
  i0 = i1 < 0;
  if (i0) goto l3;
  i0 = (int)r + 16;
  i6 = 0;
l1:
  i4 = (int)marker + i6;
  i4 = *(unsigned char*)i4;
  i3 = i4 < 32;
  if (i3) goto l2;
  i3 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i3;
l2:
  i2 = i6 + i0;
  i3 = i6 + 1;
  *(unsigned char*)i2 = i4;
  i6 = i3 > i1;
  if (i6) goto l3;
  i6 = i3;
  goto l1;
l3:
  i0 = (int)r + 18;
  *(short int*)i0 = markerLen;
  goto l5;
l4:
  i5 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i5;
l5:
  _top_vs = _old_top_vs;
}

void TextRider__ReaderDesc_ReadChar(TextRider__Reader r, unsigned char *ch) {
  register int i0;
  i0 = TextRider__Consume((TextRider__Reader)(int)r);
  *ch = i0;
}

unsigned char TextRider__ReaderDesc_Eol(TextRider__Reader r) {
  register int i0, i1, i2, i3, i4, i5, i6, i7;
  i0 = (int)*(void**)(int)r;
  i0 = i0 == 0;
  if (i0) goto l0;
  i7 = 1;
  goto l10;
l0:
  i6 = (int)r + 18;
  i0 = *(short int*)i6;
  i5 = i0 > 0;
  if (i5) goto l3;
  i7 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (i7) goto l1;
  i7 = 1;
  goto l10;
l1:
  i7 = *(short int*)i6;
  i7 = i7 > 0;
  if (i7) goto l2;
  i7 = (int)r + 21;
  i7 = *(unsigned char*)i7;
  i7 = i7 == 13;
  goto l10;
l2:
  i7 = *(int*)((int)r-4);
  i7 = (int)((_Type)i7)->tbprocs[7];
  i7 = ((unsigned char(*)(TextRider__Reader))i7)((TextRider__Reader)(int)r);
  goto l10;
l3:
  i5 = i0 - 1;
  i0 = i5 >= 0;
  if (i0) goto l4;
  i6 = 0;
  goto l9;
l4:
  i1 = (int)r + 21;
  i0 = (int)r + 16;
  i2 = (int)r + 32;
  i4 = 0;
l5:
  i3 = i4 + 1;
  i7 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)i3);
  if (i7) goto l6;
  i7 = *(short int*)i2;
  i7 = i7 == 1;
  i6 = 1;
  goto l8;
l6:
  i6 = i4 + i1;
  i7 = i4 + i0;
  i6 = *(unsigned char*)i6;
  i7 = *(unsigned char*)i7;
  i6 = i6 != i7;
  if (i6) goto l7;
  goto l8;
l7:
  i7 = 0;
l8:
  if (i6) goto l9;
  i4 = i3 > i5;
  if (i4) goto l9;
  i4 = i3;
  goto l5;
l9:
  if (i6) goto l10;
  i7 = 1;
l10:
  return (unsigned char)i7;
}

void TextRider__SkipBlanks(TextRider__Reader r) {
  register int i0, i1, i2, i3, i4;
  i0 = (int)*(void**)(int)r;
  i0 = i0 != 0;
  if (i0) goto l3;
  i3 = (int)r + 4;
  i3 = *(unsigned int*)i3;
  i3 = (i3 & ((unsigned int)1 << 0)) != 0;
  if (i3) goto l1;
  i1 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i1)) goto l3;
  i1 = (int)r + 21;
  i2 = *(unsigned char*)i1;
  i2 = i2 > 32;
  if (i2) goto l3;
l0:
  i3 = TextRider__Consume((TextRider__Reader)(int)r);
  i3 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i3)) goto l3;
  i3 = *(unsigned char*)i1;
  i3 = i3 <= 32;
  if (i3) goto l0;
  goto l3;
l1:
  i4 = *(int*)((int)r-4);
  i0 = (int)((_Type)i4)->tbprocs[7];
  i4 = ((unsigned char(*)(TextRider__Reader))i0)((TextRider__Reader)(int)r);
  if (i4) goto l3;
  i2 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i2)) goto l3;
  i2 = (int)r + 21;
  i1 = *(unsigned char*)i2;
  i4 = i1 > 32;
  if (i4) goto l3;
  i4 = i1 == 9;
  if (i4) goto l3;
l2:
  i1 = TextRider__Consume((TextRider__Reader)(int)r);
  i1 = ((unsigned char(*)(TextRider__Reader))i0)((TextRider__Reader)(int)r);
  if (i1) goto l3;
  i3 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i3)) goto l3;
  i3 = *(unsigned char*)i2;
  i1 = i3 > 32;
  if (i1) goto l3;
  i3 = i3 != 9;
  if (i3) goto l2;
l3:
  ;
}

void TextRider__SkipEol(TextRider__Reader r) {
  register int i0, i1, i2, i3;
  i0 = *(int*)((int)r-4);
  i0 = (int)((_Type)i0)->tbprocs[7];
  i0 = ((unsigned char(*)(TextRider__Reader))i0)((TextRider__Reader)(int)r);
  if (!(i0)) goto l1;
  i2 = (int)r + 18;
  i2 = *(short int*)i2;
  i1 = _abs(i2);
  i2 = i1 < 1;
  if (i2) goto l1;
  i2 = 1;
l0:
  i2++;
  i0 = i2 <= i1;
  i3 = TextRider__Consume((TextRider__Reader)(int)r);
  if (i0) goto l0;
l1:
  ;
}

void TextRider__ReaderDesc_ReadLn(TextRider__Reader r) {
  register int i0, i1;
  i0 = *(int*)((int)r-4);
  i0 = (int)((_Type)i0)->tbprocs[7];
  i1 = ((unsigned char(*)(TextRider__Reader))i0)((TextRider__Reader)(int)r);
  if (i1) goto l1;
l0:
  i1 = TextRider__Consume((TextRider__Reader)(int)r);
  i1 = ((unsigned char(*)(TextRider__Reader))i0)((TextRider__Reader)(int)r);
  if (!(i1)) goto l0;
l1:
  TextRider__SkipEol((TextRider__Reader)(int)r);
}

void TextRider__ReaderDesc_ReadString(TextRider__Reader r, unsigned char* s, int s_0d) {
  register int i0, i1, i2, i3, i4, i5, i6, i7;
  TextRider__SkipBlanks((TextRider__Reader)(int)r);
  i0 = (int)*(void**)(int)r;
  i0 = i0 != 0;
  if (i0) goto l9;
  i0 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i0)) goto l9;
  i6 = (int)r + 21;
  i1 = *(unsigned char*)i6;
  i2 = i1 == 34;
  if (i2) goto l0;
  i1 = i1 != 39;
  if (i1) goto l8;
l0:
  i1 = TextRider__Consume((TextRider__Reader)(int)r);
  i2 = s_0d - 1;
  i7 = 0;
l1:
  i3 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (i3) goto l2;
  i3 = TextRider__Consume((TextRider__Reader)(int)r);
  i4 = 1;
  goto l7;
l2:
  i5 = *(unsigned char*)i6;
  i4 = i5 < 32;
  if (i4) goto l5;
  i5 = i1 == i5;
  if (i5) goto l4;
  i4 = i7 == i2;
  if (i4) goto l3;
  i5 = TextRider__Consume((TextRider__Reader)(int)r);
  i3 = (int)s + i7;
  *(unsigned char*)i3 = i5;
  i3 = i7 + 1;
  goto l6;
l3:
  i5 = (int)TextRider__GetError((int)1);
  *(void**)(int)r = (void*)i5;
  i3 = i7;
  goto l6;
l4:
  i5 = TextRider__Consume((TextRider__Reader)(int)r);
  i3 = i7;
  i4 = 1;
  goto l6;
l5:
  i5 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i5;
  i3 = i7;
  i4 = 1;
l6:
  i7 = i3;
l7:
  if (!(i4)) goto l1;
  goto l10;
l8:
  i1 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i1;
  i7 = 0;
  goto l10;
l9:
  i0 = TextRider__Consume((TextRider__Reader)(int)r);
  i7 = 0;
l10:
  i0 = (int)s + i7;
  *(unsigned char*)i0 = 0;
}

void TextRider__ReaderDesc_ReadLine(TextRider__Reader r, unsigned char* s, int s_0d) {
  register int i0, i1, i2, i3, i4, i5, i6;
  i0 = (int)r + 20;
  i0 = *(unsigned char*)i0;
  if (!(i0)) goto l0;
  i0 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i0)) goto l0;
  i0 = (int)r + 21;
  i0 = *(unsigned char*)i0;
  i0 = i0 != 10;
  if (i0) goto l0;
  i0 = TextRider__Consume((TextRider__Reader)(int)r);
l0:
  i0 = *(int*)((int)r-4);
  i5 = (int)((_Type)i0)->tbprocs[7];
  i0 = ((unsigned char(*)(TextRider__Reader))i5)((TextRider__Reader)(int)r);
  if (i0) goto l2;
  i4 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i4)) goto l2;
  i4 = s_0d - 1;
  i3 = i4 == 0;
  if (i3) goto l2;
  i2 = 0;
l1:
  i0 = TextRider__Consume((TextRider__Reader)(int)r);
  i6 = i2 + 1;
  i1 = (int)s + i2;
  *(unsigned char*)i1 = i0;
  i0 = ((unsigned char(*)(TextRider__Reader))i5)((TextRider__Reader)(int)r);
  if (i0) goto l3;
  i0 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i0)) goto l3;
  i0 = i6 == i4;
  if (i0) goto l3;
  i2 = i6;
  goto l1;
l2:
  i6 = 0;
l3:
  i0 = ((unsigned char(*)(TextRider__Reader))i5)((TextRider__Reader)(int)r);
  if (i0) goto l4;
  i0 = s_0d - 1;
  i0 = i6 != i0;
  if (i0) goto l5;
  i0 = (int)TextRider__GetError((int)1);
  *(void**)(int)r = (void*)i0;
  goto l5;
l4:
  TextRider__SkipEol((TextRider__Reader)(int)r);
l5:
  i0 = (int)s + i6;
  *(unsigned char*)i0 = 0;
}

void TextRider__ReaderDesc_ReadIdentifier(TextRider__Reader r, unsigned char* s, int s_0d) {
  register int i0, i1, i2, i3, i4, i5, i6;
  TextRider__SkipBlanks((TextRider__Reader)(int)r);
  i0 = (int)*(void**)(int)r;
  i0 = i0 != 0;
  if (i0) goto l7;
  i0 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i0)) goto l7;
  i5 = (int)r + 21;
  i1 = *(unsigned char*)i5;
  i1 = CharClass__IsLetter((unsigned char)i1);
  if (i1) goto l0;
  i1 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i1;
  i6 = 0;
  goto l8;
l0:
  i4 = TextRider__Consume((TextRider__Reader)(int)r);
  *(unsigned char*)(int)s = i4;
  i2 = s_0d - 1;
  i6 = 1;
l1:
  i3 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i3)) goto l5;
  i3 = *(unsigned char*)i5;
  i3 = CharClass__IsLetter((unsigned char)i3);
  if (i3) goto l2;
  i3 = *(unsigned char*)i5;
  i3 = CharClass__IsNumeric((unsigned char)i3);
  if (!(i3)) goto l5;
l2:
  i1 = i6 == i2;
  if (i1) goto l3;
  i3 = TextRider__Consume((TextRider__Reader)(int)r);
  i4 = (int)s + i6;
  *(unsigned char*)i4 = i3;
  i4 = i6 + 1;
  goto l4;
l3:
  i3 = (int)TextRider__GetError((int)1);
  *(void**)(int)r = (void*)i3;
  i4 = i6;
l4:
  i6 = i4;
  goto l6;
l5:
  i1 = 1;
l6:
  if (!(i1)) goto l1;
  goto l8;
l7:
  i0 = TextRider__Consume((TextRider__Reader)(int)r);
  i6 = 0;
l8:
  i0 = (int)s + i6;
  *(unsigned char*)i0 = 0;
}

void TextRider__ReaderDesc_ReadBool(TextRider__Reader r, unsigned char *bool_) {
  register int i0;
  unsigned char ident[8];
  i0 = *(int*)((int)r-4);
  i0 = (int)((_Type)i0)->tbprocs[11];
  ((void(*)(TextRider__Reader, unsigned char*, int s_0d))i0)((TextRider__Reader)(int)r, (unsigned char*)(int)ident, 8);
  i0 = (int)*(void**)(int)r;
  i0 = i0 != 0;
  if (i0) goto l2;
  i0 = strcmp((const char*) (int)ident, (const char*) (int)_c2) == 0;
  if (i0) goto l1;
  i0 = strcmp((const char*) (int)ident, (const char*) (int)_c3) == 0;
  if (i0) goto l0;
  i0 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i0;
  goto l2;
l0:
  *bool_ = 0;
  goto l2;
l1:
  *bool_ = 1;
l2:
  ;
}

unsigned char TextRider__HexDigit(unsigned char ch) {
  register int i0;
  i0 = (int)ch < 48;
  if (i0) goto l0;
  i0 = (int)ch <= 57;
  if (i0) goto l2;
l0:
  i0 = (int)ch >= 65;
  if (!(i0)) goto l1;
  i0 = (int)ch <= 70;
  if (i0) goto l2;
l1:
  i0 = 0;
  goto l3;
l2:
  i0 = 1;
l3:
  return (unsigned char)i0;
}

unsigned char TextRider__HexToInt(const unsigned char* str__ref, int str_0d, int *lint) {
  register int i0, i1, i2, i3, i4;
  unsigned char* str;
  char* _old_top_vs = _top_vs;
  _push_value(int, str, str__ref, str_0d);
  *lint = 0;
  i1 = 0;
l0:
  i3 = (int)str + i1;
  i0 = *(unsigned char*)i3;
  i2 = i0 == 0;
  if (i2) goto l2;
  i3 = CharClass__IsNumeric((unsigned char)i0);
  if (i3) goto l1;
  i3 = i0 - 55;
  goto l3;
l1:
  i3 = i0 - 48;
  goto l3;
l2:
  i3 = 0;
l3:
  if (i2) goto l9;
  i4 = *lint;
  i0 = i4 >= 268435456;
  if (i0) goto l5;
  i0 = i4 < 0;
  if (i0) goto l5;
  i2 = i4 < 134217728;
  if (i2) goto l4;
  i2 = i3 < 8;
  if (i2) goto l4;
  i4 -= 268435456;
  *lint = i4;
l4:
  i0 = 0;
  goto l6;
l5:
  i4 = 0;
  i0 = 1;
l6:
  if (i0) goto l7;
  i2 = *lint;
  i2 = (int)_ashl(i2, 4, (unsigned int));
  i3 += i2;
  *lint = i3;
  i2 = i1 + 1;
  goto l8;
l7:
  i2 = i1;
l8:
  i1 = i2;
  goto l10;
l9:
  i0 = 1;
  i4 = 1;
l10:
  if (!(i0)) goto l0;
  _top_vs = _old_top_vs;
  return (unsigned char)i4;
}

void TextRider__ReaderDesc_ReadLInt(TextRider__Reader r, int *lint) {
  register int i0, i1, i2, i3, i4, i5, i6;
  signed char res;
  unsigned char str[14];
  TextRider__SkipBlanks((TextRider__Reader)(int)r);
  i0 = (int)*(void**)(int)r;
  i0 = i0 != 0;
  if (i0) goto l14;
  i0 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i0)) goto l14;
  i1 = (int)r + 21;
  i2 = *(unsigned char*)i1;
  i6 = i2 == 43;
  if (i6) goto l0;
  i2 = i2 == 45;
  if (i2) goto l0;
  i2 = 0;
  i4 = 0;
  goto l2;
l0:
  i6 = TextRider__Consume((TextRider__Reader)(int)r);
  i2 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (i2) goto l1;
  i3 = TextRider__Consume((TextRider__Reader)(int)r);
l1:
  i2 = ! i2;
  *(unsigned char*)(int)str = i6;
  i4 = 1;
l2:
  if (i2) goto l15;
  i3 = *(unsigned char*)i1;
  i3 = CharClass__IsNumeric((unsigned char)i3);
  if (i3) goto l3;
  i3 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i3;
  goto l15;
l3:
  i2 = (int)str + i4;
  *(unsigned char*)i2 = 48;
  i2 = i4 + 1;
  i4 = 1;
  i5 = i2;
l4:
  i6 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i6)) goto l9;
  i2 = *(unsigned char*)i1;
  i6 = CharClass__IsNumeric((unsigned char)i2);
  if (!(i6)) goto l9;
  i3 = TextRider__Consume((TextRider__Reader)(int)r);
  if (!(i4)) goto l5;
  i2 = i3 != 48;
  if (i2) goto l5;
  i3 = 1;
  i2 = i5;
  goto l8;
l5:
  i2 = i5 != 14;
  if (i2) goto l6;
  i2 = 14;
  goto l7;
l6:
  i2 = (int)str + i5;
  *(unsigned char*)i2 = i3;
  i2 = i5 + 1;
l7:
  i3 = 0;
l8:
  i5 = i2;
  i4 = i3;
  i6 = 0;
  goto l10;
l9:
  i6 = 1;
l10:
  if (!(i6)) goto l4;
  i2 = i5 == 14;
  if (i2) goto l11;
  i2 = (int)str + i5;
  *(unsigned char*)i2 = 0;
  i2 = *lint;
  IntStr__StrToInt((const unsigned char*)(int)str, 14, (int *)(int)lint, (signed char *)(int)&res);
  i4 = res;
  goto l12;
l11:
  i4 = 1;
l12:
  i2 = i4 == 1;
  if (i2) goto l13;
  i4 = i4 == 0;
  if (i4) goto l15;
  i4 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i4;
  goto l15;
l13:
  i2 = (int)TextRider__GetError((int)1);
  *(void**)(int)r = (void*)i2;
  goto l15;
l14:
  i0 = TextRider__Consume((TextRider__Reader)(int)r);
l15:
  ;
}

void TextRider__ReaderDesc_ReadHex(TextRider__Reader r, int *lint) {
  register int i0, i1, i2, i3, i4, i5;
  unsigned char str[11];
  TextRider__SkipBlanks((TextRider__Reader)(int)r);
  i0 = (int)*(void**)(int)r;
  i0 = i0 != 0;
  if (i0) goto l10;
  i0 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i0)) goto l10;
  i3 = (int)r + 21;
  i1 = *(unsigned char*)i3;
  i1 = CharClass__IsNumeric((unsigned char)i1);
  if (i1) goto l0;
  i1 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i1;
  goto l11;
l0:
  *(unsigned char*)(int)str = 48;
  i1 = 1;
  i5 = 1;
l1:
  i4 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i4)) goto l2;
  i4 = *(unsigned char*)i3;
  i4 = TextRider__HexDigit((unsigned char)i4);
  if (i4) goto l3;
l2:
  i4 = 1;
  goto l8;
l3:
  i4 = TextRider__Consume((TextRider__Reader)(int)r);
  if (!(i1)) goto l4;
  i2 = i4 != 48;
  if (i2) goto l4;
  i4 = 1;
  i2 = i5;
  goto l7;
l4:
  i2 = i5 != 11;
  if (i2) goto l5;
  i2 = 11;
  goto l6;
l5:
  i2 = (int)str + i5;
  *(unsigned char*)i2 = i4;
  i2 = i5 + 1;
l6:
  i4 = 0;
l7:
  i5 = i2;
  i1 = i4;
  i4 = 0;
l8:
  if (!(i4)) goto l1;
  i2 = i5 == 11;
  if (i2) goto l9;
  i2 = (int)str + i5;
  *(unsigned char*)i2 = 0;
  i2 = *lint;
  i2 = TextRider__HexToInt((const unsigned char*)(int)str, 11, (int *)(int)lint);
  if (i2) goto l11;
  i2 = (int)TextRider__GetError((int)1);
  *(void**)(int)r = (void*)i2;
  goto l11;
l9:
  i2 = (int)TextRider__GetError((int)1);
  *(void**)(int)r = (void*)i2;
  goto l11;
l10:
  i0 = TextRider__Consume((TextRider__Reader)(int)r);
l11:
  ;
}

void TextRider__ReaderDesc_ReadInt(TextRider__Reader r, short int *int_) {
  register int i0;
  int lint;
  i0 = *(int*)((int)r-4);
  i0 = (int)((_Type)i0)->tbprocs[13];
  ((void(*)(TextRider__Reader, int *))i0)((TextRider__Reader)(int)r, (int *)(int)&lint);
  i0 = lint > 32767;
  if (i0) goto l0;
  i0 = lint < -32768;
  if (i0) goto l0;
  *int_ = lint;
  goto l1;
l0:
  i0 = (int)TextRider__GetError((int)1);
  *(void**)(int)r = (void*)i0;
l1:
  ;
}

void TextRider__ReaderDesc_ReadSInt(TextRider__Reader r, signed char *sint) {
  register int i0;
  int lint;
  i0 = *(int*)((int)r-4);
  i0 = (int)((_Type)i0)->tbprocs[13];
  ((void(*)(TextRider__Reader, int *))i0)((TextRider__Reader)(int)r, (int *)(int)&lint);
  i0 = lint > 127;
  if (i0) goto l0;
  i0 = lint < -128;
  if (i0) goto l0;
  *sint = lint;
  goto l1;
l0:
  i0 = (int)TextRider__GetError((int)1);
  *(void**)(int)r = (void*)i0;
l1:
  ;
}

void TextRider__ReaderDesc_ReadLReal(TextRider__Reader r, double *lreal) {
  register int i0, i1, i2, i3, i4, i5, i6, i7;
  register double d0;
  signed char class_;
  signed char res;
  ConvTypes__ScanState state;
  unsigned char str[1024];
  TextRider__SkipBlanks((TextRider__Reader)(int)r);
  i0 = (int)*(void**)(int)r;
  i0 = i0 != 0;
  if (i0) goto l9;
  i0 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i0)) goto l9;
  i5 = (int)r + 21;
  i1 = *(unsigned char*)i5;
  LRealConv__ScanReal((unsigned char)i1, (signed char *)(int)&class_, (ConvTypes__ScanState *)(int)&state);
  i1 = class_ == 1;
  if (i1) goto l0;
  i1 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i1;
  goto l10;
l0:
  i4 = TextRider__Consume((TextRider__Reader)(int)r);
  *(unsigned char*)(int)str = i4;
  i3 = 1;
  i7 = (int)state;
  i6 = 1;
l1:
  i1 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (i1) goto l2;
  i4 = 1;
  goto l6;
l2:
  i4 = *(unsigned char*)i5;
  i1 = (int)*(void(**)(unsigned char, signed char *, ConvTypes__ScanState *))i7;
  class_ = (signed char)i3;
  state = (void*)i7;
  class_ = (signed char)i3;
  state = (void*)i7;
  ((void(*)(unsigned char, signed char *, ConvTypes__ScanState *))i1)((unsigned char)i4, (signed char *)(int)&class_, (ConvTypes__ScanState *)(int)&state);
  i1 = class_ == 1;
  if (i1) goto l3;
  i2 = i6;
  goto l5;
l3:
  i2 = i6 < 1024;
  if (!(i2)) goto l4;
  i4 = (int)str + i6;
  i2 = TextRider__Consume((TextRider__Reader)(int)r);
  *(unsigned char*)i4 = i2;
l4:
  i2 = i6 + 1;
l5:
  i4 = ! i1;
  i6 = i2;
  i7 = (int)state;
  i3 = class_;
l6:
  if (!(i4)) goto l1;
  i4 = i6 < 1024;
  if (i4) goto l7;
  i4 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i4;
  goto l10;
l7:
  i4 = (int)str + i6;
  *(unsigned char*)i4 = 0;
  d0 = *lreal;
  LRealStr__StrToReal((const unsigned char*)(int)str, 1024, (double *)(int)lreal, (signed char *)(int)&res);
  i4 = res == 1;
  if (i4) goto l8;
  i4 = res == 0;
  if (i4) goto l10;
  i4 = (int)TextRider__GetError((int)8);
  *(void**)(int)r = (void*)i4;
  goto l10;
l8:
  i4 = (int)TextRider__GetError((int)1);
  *(void**)(int)r = (void*)i4;
  goto l10;
l9:
  i0 = TextRider__Consume((TextRider__Reader)(int)r);
l10:
  ;
}

unsigned char TextRider__ReaderDesc_ReadReal_ValidReal(double value) {
  register int i0;
  i0 = value <= -3.4028235677973366E+38;
  if (i0) goto l0;
  i0 = value < 3.4028235677973366E+38;
  if (i0) goto l1;
l0:
  i0 = 0;
  goto l2;
l1:
  i0 = 1;
l2:
  return (unsigned char)i0;
}

void TextRider__ReaderDesc_ReadReal(TextRider__Reader r, float *real) {
  register int i0;
  register float f0;
  double n;
  i0 = *(int*)((int)r-4);
  i0 = (int)((_Type)i0)->tbprocs[17];
  ((void(*)(TextRider__Reader, double *))i0)((TextRider__Reader)(int)r, (double *)(int)&n);
  i0 = TextRider__ReaderDesc_ReadReal_ValidReal((double)n);
  if (i0) goto l0;
  i0 = (int)TextRider__GetError((int)1);
  *(void**)(int)r = (void*)i0;
  goto l1;
l0:
  f0 = n;
  *real = f0;
l1:
  ;
}

unsigned int TextRider__ReaderDesc_ReadSet_ReadRange(TextRider__Reader *TextRider__ReaderDesc_ReadSet_r, unsigned char *TextRider__ReaderDesc_ReadSet_ch) {
  register int i0, i1, i2, i3, i4;
  signed char high;
  signed char low;
  i0 = (int)*TextRider__ReaderDesc_ReadSet_r;
  i1 = *(int*)(i0-4);
  i2 = (int)((_Type)i1)->tbprocs[16];
  ((void(*)(TextRider__Reader, signed char *))i2)((TextRider__Reader)i0, (signed char *)(int)&low);
  i1 = (int)*(void**)i0;
  i1 = i1 == 0;
  if (i1) goto l0;
  i4 = 0;
  i3 = low;
  goto l7;
l0:
  i1 = low < 0;
  if (i1) goto l6;
  i1 = low > 31;
  if (i1) goto l6;
  i3 = TextRider__Lookahead((TextRider__Reader)i0, (short int)2);
  if (!(i3)) goto l1;
  i3 = i0 + 21;
  i4 = *(unsigned char*)i3;
  i4 = i4 != 46;
  if (i4) goto l1;
  i3++;
  i3 = *(unsigned char*)i3;
  i3 = i3 == 46;
  if (i3) goto l2;
l1:
  i4 = 0;
  i3 = low;
  goto l7;
l2:
  i4 = TextRider__Consume((TextRider__Reader)i0);
  *TextRider__ReaderDesc_ReadSet_ch = i4;
  i4 = TextRider__Consume((TextRider__Reader)i0);
  *TextRider__ReaderDesc_ReadSet_ch = i4;
  TextRider__SkipBlanks((TextRider__Reader)i0);
  high = (signed char)low;
  high = (signed char)low;
  ((void(*)(TextRider__Reader, signed char *))i2)((TextRider__Reader)i0, (signed char *)(int)&high);
  i2 = (int)*(void**)i0;
  i2 = i2 != 0;
  if (i2) goto l3;
  i2 = high < 0;
  if (i2) goto l4;
  i2 = high > 31;
  if (i2) goto l4;
  i2 = high < low;
  if (i2) goto l4;
l3:
  i4 = 0;
  goto l5;
l4:
  i2 = (int)TextRider__GetError((int)1);
  *(void**)i0 = (void*)i2;
  i4 = 1;
l5:
  i3 = high;
  goto l7;
l6:
  i1 = (int)TextRider__GetError((int)1);
  *(void**)i0 = (void*)i1;
  i3 = low;
  i4 = 1;
l7:
  if (i4) goto l8;
  TextRider__SkipBlanks((TextRider__Reader)i0);
  i1 = _bit_range((unsigned int), low, i3);
  goto l9;
l8:
  i1 = 0x0U;
l9:
  return (unsigned int)i1;
}

void TextRider__ReaderDesc_ReadSet(TextRider__Reader r, unsigned int *s) {
  register int i0, i1, i2, i3, i4, i5, i6, i7;
  unsigned char ch;
  i6 = (int)r;
  TextRider__SkipBlanks((TextRider__Reader)i6);
  i0 = (int)*(void**)i6;
  i0 = i0 != 0;
  if (i0) goto l8;
  i0 = TextRider__Lookahead((TextRider__Reader)i6, (short int)1);
  if (!(i0)) goto l8;
  i4 = i6 + 21;
  i7 = *(unsigned char*)i4;
  i7 = i7 == 123;
  if (i7) goto l0;
  i7 = (int)TextRider__GetError((int)8);
  *(void**)i6 = (void*)i7;
  goto l9;
l0:
  *s = 0x0U;
  i1 = TextRider__Consume((TextRider__Reader)i6);
  TextRider__SkipBlanks((TextRider__Reader)i6);
  i3 = (int)*(void**)i6;
  i3 = i3 != 0;
  if (i3) goto l7;
  i3 = TextRider__Lookahead((TextRider__Reader)i6, (short int)1);
  if (!(i3)) goto l7;
  i4 = *(unsigned char*)i4;
  i4 = i4 != 125;
  if (i4) goto l1;
  i2 = i6;
  goto l4;
l1:
  i7 = *s;
  r = (void*)i6;
  ch = (unsigned char)i1;
  ch = (unsigned char)i1;
  r = (void*)i6;
  i1 = TextRider__ReaderDesc_ReadSet_ReadRange((TextRider__Reader *)&r, &ch);
  i2 = (int)r;
  i1 |= i7;
  *s = i1;
  i1 = (int)*(void**)i2;
  i1 = i1 != 0;
  if (i1) goto l4;
  i5 = TextRider__Lookahead((TextRider__Reader)i2, (short int)1);
  if (!(i5)) goto l4;
  i7 = i2 + 21;
  i7 = *(unsigned char*)i7;
  i5 = i7 != 44;
  if (i5) goto l4;
  i4 = i2;
l2:
  i7 = TextRider__Consume((TextRider__Reader)i4);
  TextRider__SkipBlanks((TextRider__Reader)i4);
  i1 = *s;
  r = (void*)i4;
  ch = (unsigned char)i7;
  ch = (unsigned char)i7;
  r = (void*)i4;
  i7 = TextRider__ReaderDesc_ReadSet_ReadRange((TextRider__Reader *)&r, &ch);
  i7 |= i1;
  *s = i7;
  i7 = (int)*(void**)(int)r;
  i7 = i7 != 0;
  if (i7) goto l3;
  i7 = TextRider__Lookahead((TextRider__Reader)(int)r, (short int)1);
  if (!(i7)) goto l3;
  i7 = (int)r + 21;
  i7 = *(unsigned char*)i7;
  i7 = i7 != 44;
  if (i7) goto l3;
  i4 = (int)r;
  goto l2;
l3:
  i2 = (int)r;
l4:
  i4 = (int)*(void**)i2;
  i4 = i4 != 0;
  if (i4) goto l5;
  i4 = i2 + 21;
  i4 = *(unsigned char*)i4;
  i4 = i4 == 125;
  if (i4) goto l6;
l5:
  i4 = (int)TextRider__GetError((int)8);
  *(void**)i2 = (void*)i4;
  goto l9;
l6:
  i4 = TextRider__Consume((TextRider__Reader)i2);
  goto l9;
l7:
  i3 = TextRider__Consume((TextRider__Reader)i6);
  goto l9;
l8:
  i6 = TextRider__Consume((TextRider__Reader)i6);
l9:
  ;
}

void TextRider__SkipSpaces(TextRider__Scanner s) {
  register int i0, i1, i2, i3, i4;
  i3 = (int)s + 4;
  i0 = (int)s + 12;
  i0 = *(unsigned int*)i0;
  i0 = (i0 & ((unsigned int)1 << 0)) != 0;
  if (i0) goto l3;
  i2 = (int)*(void**)i3;
  i2 = TextRider__Lookahead((TextRider__Reader)i2, (short int)1);
  if (!(i2)) goto l5;
  i0 = (int)*(void**)i3;
  i0 += 21;
  i0 = *(unsigned char*)i0;
  i4 = i0 > 32;
  if (i4) goto l5;
  i0 = (int)s + 24;
l0:
  i1 = (int)*(void**)i3;
  i2 = *(int*)(i1-4);
  i2 = (int)((_Type)i2)->tbprocs[7];
  i1 = ((unsigned char(*)(TextRider__Reader))i2)((TextRider__Reader)i1);
  if (i1) goto l1;
  i1 = (int)*(void**)i3;
  i1 = TextRider__Consume((TextRider__Reader)i1);
  goto l2;
l1:
  i1 = *(int*)i0;
  i1++;
  *(int*)i0 = i1;
  i1 = (int)*(void**)i3;
  TextRider__SkipEol((TextRider__Reader)i1);
l2:
  i1 = (int)*(void**)i3;
  i1 = TextRider__Lookahead((TextRider__Reader)i1, (short int)1);
  if (!(i1)) goto l5;
  i1 = (int)*(void**)i3;
  i1 += 21;
  i1 = *(unsigned char*)i1;
  i1 = i1 <= 32;
  if (i1) goto l0;
  goto l5;
l3:
  i1 = (int)*(void**)i3;
  i0 = *(int*)(i1-4);
  i0 = (int)((_Type)i0)->tbprocs[7];
  i1 = ((unsigned char(*)(TextRider__Reader))i0)((TextRider__Reader)i1);
  if (i1) goto l5;
  i0 = (int)*(void**)i3;
  i0 = TextRider__Lookahead((TextRider__Reader)i0, (short int)1);
  if (!(i0)) goto l5;
  i1 = (int)*(void**)i3;
  i1 += 21;
  i2 = *(unsigned char*)i1;
  i1 = i2 > 32;
  if (i1) goto l5;
  i1 = i2 == 9;
  if (i1) goto l5;
l4:
  i0 = (int)*(void**)i3;
  i0 = TextRider__Consume((TextRider__Reader)i0);
  i0 = (int)*(void**)i3;
  i2 = *(int*)(i0-4);
  i2 = (int)((_Type)i2)->tbprocs[7];
  i0 = ((unsigned char(*)(TextRider__Reader))i2)((TextRider__Reader)i0);
  if (i0) goto l5;
  i0 = (int)*(void**)i3;
  i0 = TextRider__Lookahead((TextRider__Reader)i0, (short int)1);
  if (!(i0)) goto l5;
  i2 = (int)*(void**)i3;
  i2 += 21;
  i2 = *(unsigned char*)i2;
  i0 = i2 > 32;
  if (i0) goto l5;
  i2 = i2 != 9;
  if (i2) goto l4;
l5:
  i0 = (int)*(void**)i3;
  i0 = (int)*(void**)i0;
  *(void**)(int)s = (void*)i0;
}

int TextRider__ScannerDesc_Pos(TextRider__Scanner s) {
  register int i0, i1;
  i0 = (int)s + 4;
  i0 = (int)*(void**)i0;
  i1 = *(int*)(i0-4);
  i1 = (int)((_Type)i1)->tbprocs[0];
  i0 = ((int(*)(TextRider__Reader))i1)((TextRider__Reader)i0);
  return (int)i0;
}

void TextRider__ScannerDesc_ClearError(TextRider__Scanner s) {
  register int i0, i1;
  i0 = (int)s + 4;
  i0 = (int)*(void**)i0;
  i1 = *(int*)(i0-4);
  i1 = (int)((_Type)i1)->tbprocs[1];
  ((void(*)(TextRider__Reader))i1)((TextRider__Reader)i0);
  i0 = (int)s + 16;
  *(void**)(int)s = (void*)0;
  *(short int*)i0 = -1;
}

int TextRider__ScannerDesc_Available(TextRider__Scanner s) {
  register int i0, i1;
  i0 = (int)s + 4;
  i0 = (int)*(void**)i0;
  i1 = *(int*)(i0-4);
  i1 = (int)((_Type)i1)->tbprocs[2];
  i0 = ((int(*)(TextRider__Reader))i1)((TextRider__Reader)i0);
  return (int)i0;
}

void TextRider__ScannerDesc_SetPos(TextRider__Scanner s, int pos) {
  register int i0, i1, i2;
  i0 = (int)*(void**)(int)s;
  i0 = i0 != 0;
  if (i0) goto l0;
  i1 = (int)s + 4;
  i2 = (int)*(void**)i1;
  i0 = *(int*)(i2-4);
  i0 = (int)((_Type)i0)->tbprocs[3];
  ((void(*)(TextRider__Reader, int))i0)((TextRider__Reader)i2, (int)pos);
  i1 = (int)*(void**)i1;
  i1 = (int)*(void**)i1;
  *(void**)(int)s = (void*)i1;
l0:
  ;
}

void TextRider__ScannerDesc_Scan_ReadNum_Get(short int *TextRider__ScannerDesc_Scan_pos, unsigned char TextRider__ScannerDesc_Scan_str[1024], TextRider__Scanner *TextRider__ScannerDesc_Scan_s) {
  register int i0, i1, i2, i3, i4;
  i3 = *TextRider__ScannerDesc_Scan_pos;
  i1 = (int)*TextRider__ScannerDesc_Scan_s;
  i0 = i3 >= 1024;
  i2 = i1 + 4;
  if (i0) goto l0;
  i0 = (int)*(void**)i2;
  i4 = (int)TextRider__ScannerDesc_Scan_str + i3;
  i0 = TextRider__Consume((TextRider__Reader)i0);
  *(unsigned char*)i4 = i0;
l0:
  i0 = (int)*(void**)i2;
  i1 = i3 + 1;
  *TextRider__ScannerDesc_Scan_pos = i1;
  i1 = (int)*(void**)i0;
  i1 = i1 == 0;
  if (i1) goto l1;
  i1 = i0 + 21;
  *(unsigned char*)i1 = 0;
  goto l2;
l1:
  i0 = TextRider__Lookahead((TextRider__Reader)i0, (short int)1);
l2:
  ;
}

unsigned char TextRider__ScannerDesc_Scan_ReadNum_LA(TextRider__Scanner *TextRider__ScannerDesc_Scan_s) {
  register int i0;
  i0 = (int)*TextRider__ScannerDesc_Scan_s;
  i0 += 4;
  i0 = (int)*(void**)i0;
  i0 += 21;
  i0 = *(unsigned char*)i0;
  return (unsigned char)i0;
}

void TextRider__ScannerDesc_Scan_ReadNum(TextRider__Scanner *TextRider__ScannerDesc_Scan_s, short int *TextRider__ScannerDesc_Scan_pos, unsigned char TextRider__ScannerDesc_Scan_str[1024], signed char *TextRider__ScannerDesc_Scan_res) {
  register int i0, i1, i2, i3, i4, i5;
  register double d0;
  i4 = (int)*TextRider__ScannerDesc_Scan_s;
  i0 = i4 + 4;
  i3 = (int)*(void**)i0;
  i0 = (int)*(void**)i3;
  i0 = i0 != 0;
  if (i0) goto l19;
  i1 = TextRider__Lookahead((TextRider__Reader)i3, (short int)1);
  if (!(i1)) goto l19;
  *TextRider__ScannerDesc_Scan_pos = 0;
  i2 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i5 = i2 == 45;
  if (i5) goto l0;
  i2 = i2 != 43;
  if (i2) goto l1;
l0:
  TextRider__ScannerDesc_Scan_ReadNum_Get(&*TextRider__ScannerDesc_Scan_pos, TextRider__ScannerDesc_Scan_str, (TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
l1:
  i5 = (int)*TextRider__ScannerDesc_Scan_s;
  i4 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i4 = CharClass__IsNumeric((unsigned char)i4);
  if (i4) goto l2;
  i2 = (int)TextRider__GetError((int)8);
  *(void**)i5 = (void*)i2;
  goto l4;
l2:
  i5 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i5 = TextRider__HexDigit((unsigned char)i5);
  if (!(i5)) goto l4;
l3:
  TextRider__ScannerDesc_Scan_ReadNum_Get(&*TextRider__ScannerDesc_Scan_pos, TextRider__ScannerDesc_Scan_str, (TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i5 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i5 = TextRider__HexDigit((unsigned char)i5);
  if (i5) goto l3;
l4:
  if (!(i4)) goto l19;
  i4 = (int)*TextRider__ScannerDesc_Scan_s;
  i5 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i3 = i5 == 46;
  if (i3) goto l7;
  i5 = i5 == 72;
  if (i5) goto l5;
  i0 = *TextRider__ScannerDesc_Scan_pos;
  i2 = i4 + 16;
  i3 = i4 + 28;
  i5 = (int)TextRider__ScannerDesc_Scan_str + i0;
  *(short int*)i2 = 2;
  *(unsigned char*)i5 = 0;
  i0 = *(int*)i3;
  i2 = *TextRider__ScannerDesc_Scan_res;
  IntStr__StrToInt((const unsigned char*)(int)TextRider__ScannerDesc_Scan_str, 1024, (int *)i3, (signed char *)(int)TextRider__ScannerDesc_Scan_res);
  i0 = *TextRider__ScannerDesc_Scan_res;
  i0 = i0 == 0;
  if (i0) goto l19;
  i0 = (int)TextRider__GetError((int)8);
  *(void**)i4 = (void*)i0;
  goto l19;
l5:
  i0 = *TextRider__ScannerDesc_Scan_pos;
  i2 = i4 + 28;
  i3 = i4 + 16;
  i5 = (int)TextRider__ScannerDesc_Scan_str + i0;
  *(short int*)i3 = 2;
  *(unsigned char*)i5 = 0;
  i3 = *(int*)i2;
  i3 = TextRider__HexToInt((const unsigned char*)(int)TextRider__ScannerDesc_Scan_str, 1024, (int *)i2);
  if (i3) goto l6;
  i2 = (int)TextRider__GetError((int)8);
  *(void**)i4 = (void*)i2;
l6:
  TextRider__ScannerDesc_Scan_ReadNum_Get(&*TextRider__ScannerDesc_Scan_pos, TextRider__ScannerDesc_Scan_str, (TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  goto l19;
l7:
  i0 = i4 + 16;
  *(short int*)i0 = 3;
  TextRider__ScannerDesc_Scan_ReadNum_Get(&*TextRider__ScannerDesc_Scan_pos, TextRider__ScannerDesc_Scan_str, (TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i0 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i0 = CharClass__IsNumeric((unsigned char)i0);
  if (!(i0)) goto l9;
l8:
  TextRider__ScannerDesc_Scan_ReadNum_Get(&*TextRider__ScannerDesc_Scan_pos, TextRider__ScannerDesc_Scan_str, (TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i0 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i0 = CharClass__IsNumeric((unsigned char)i0);
  if (i0) goto l8;
l9:
  i0 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i4 = i0 == 69;
  if (i4) goto l10;
  i0 = i0 == 101;
  if (i0) goto l10;
  i4 = 0;
  goto l17;
l10:
  TextRider__ScannerDesc_Scan_ReadNum_Get(&*TextRider__ScannerDesc_Scan_pos, TextRider__ScannerDesc_Scan_str, (TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i2 = *TextRider__ScannerDesc_Scan_pos;
  i4 = i2 - 1;
  i0 = i4 >= 1024;
  if (i0) goto l11;
  i0 = (int)TextRider__ScannerDesc_Scan_str + i4;
  *(unsigned char*)i0 = 69;
l11:
  i4 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i0 = i4 == 45;
  if (i0) goto l12;
  i4 = i4 != 43;
  if (i4) goto l13;
l12:
  TextRider__ScannerDesc_Scan_ReadNum_Get(&*TextRider__ScannerDesc_Scan_pos, TextRider__ScannerDesc_Scan_str, (TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
l13:
  i0 = (int)*TextRider__ScannerDesc_Scan_s;
  i4 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i2 = CharClass__IsNumeric((unsigned char)i4);
  if (i2) goto l14;
  i4 = (int)TextRider__GetError((int)8);
  *(void**)i0 = (void*)i4;
  goto l16;
l14:
  i0 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i0 = CharClass__IsNumeric((unsigned char)i0);
  if (!(i0)) goto l16;
l15:
  TextRider__ScannerDesc_Scan_ReadNum_Get(&*TextRider__ScannerDesc_Scan_pos, TextRider__ScannerDesc_Scan_str, (TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i0 = TextRider__ScannerDesc_Scan_ReadNum_LA((TextRider__Scanner *)&*TextRider__ScannerDesc_Scan_s);
  i0 = CharClass__IsNumeric((unsigned char)i0);
  if (i0) goto l15;
l16:
  i4 = ! i2;
l17:
  if (i4) goto l19;
  i4 = *TextRider__ScannerDesc_Scan_pos;
  i3 = i4 < 1024;
  if (i3) goto l18;
  i3 = (int)*TextRider__ScannerDesc_Scan_s;
  i2 = (int)TextRider__GetError((int)8);
  *(void**)i3 = (void*)i2;
  goto l19;
l18:
  i3 = (int)*TextRider__ScannerDesc_Scan_s;
  i0 = i3 + 32;
  i2 = (int)TextRider__ScannerDesc_Scan_str + i4;
  *(unsigned char*)i2 = 0;
  d0 = *(double*)i0;
  i2 = *TextRider__ScannerDesc_Scan_res;
  LRealStr__StrToReal((const unsigned char*)(int)TextRider__ScannerDesc_Scan_str, 1024, (double *)i0, (signed char *)(int)TextRider__ScannerDesc_Scan_res);
  i0 = *TextRider__ScannerDesc_Scan_res;
  i0 = i0 == 0;
  if (i0) goto l19;
  i0 = (int)TextRider__GetError((int)8);
  *(void**)i3 = (void*)i0;
l19:
  ;
}

void TextRider__ScannerDesc_Scan_SetType(signed char type, TextRider__Scanner *TextRider__ScannerDesc_Scan_s) {
  register int i0, i1;
  i0 = (int)*TextRider__ScannerDesc_Scan_s;
  i1 = i0 + 16;
  *(short int*)i1 = type;
}

void TextRider__ScannerDesc_Scan(TextRider__Scanner s) {
  register int i0, i1, i2, i3, i4, i5, i6;
  short int pos;
  signed char res;
  unsigned char str[1024];
  i5 = (int)s;
  i4 = i5 + 16;
  i0 = *(short int*)i4;
  i0 = i0 >= 9;
  if (i0) goto l21;
  TextRider__SkipSpaces((TextRider__Scanner)i5);
  i3 = (int)*(void**)i5;
  i3 = i3 != 0;
  if (i3) goto l16;
  i2 = i5 + 4;
  i6 = (int)*(void**)i2;
  i1 = TextRider__Lookahead((TextRider__Reader)i6, (short int)1);
  if (!(i1)) goto l16;
  i6 = *(int*)(i5-4);
  i6 = (int)((_Type)i6)->tbprocs[0];
  i6 = ((int(*)(TextRider__Scanner))i6)((TextRider__Scanner)i5);
  i3 = i5 + 20;
  *(int*)i3 = i6;
  i6 = (int)*(void**)i2;
  i3 = *(int*)(i6-4);
  i3 = (int)((_Type)i3)->tbprocs[7];
  i6 = ((unsigned char(*)(TextRider__Reader))i3)((TextRider__Reader)i6);
  if (i6) goto l15;
  i6 = (int)*(void**)i2;
  i3 = i6 + 21;
  i3 = *(unsigned char*)i3;
  if (!(i3<=33 || (i3>=35 && i3<=38) || (i3>=40 && i3<=42) || i3==44 || (i3>=46 && i3<=47) || (i3>=58 && i3<=64) || (i3>=91 && i3<=96) || i3>=124)) goto l2;
  i4 = i5 + 40;
  i0 = *(int*)(i6-4);
  i3 = *(unsigned char*)i4;
  i0 = (int)((_Type)i0)->tbprocs[6];
  ((void(*)(TextRider__Reader, unsigned char *))i0)((TextRider__Reader)i6, (unsigned char *)i4);
  i4 = *(unsigned char*)i4;
  i4 = i4 == 9;
  if (i4) goto l0;
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_SetType((signed char)0, (TextRider__Scanner *)&s);
  goto l1;
l0:
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_SetType((signed char)6, (TextRider__Scanner *)&s);
l1:
  i0 = i5;
  goto l17;
l2:
  if (!(i3==34 || i3==39)) goto l5;
  i4 = i5 + 12;
  i4 = *(unsigned int*)i4;
  i4 = (i4 & ((unsigned int)1 << 3)) != 0;
  if (i4) goto l3;
  i3 = *(int*)(i6-4);
  i0 = i5 + 40;
  i4 = (int)((_Type)i3)->tbprocs[6];
  i3 = *(unsigned char*)i0;
  ((void(*)(TextRider__Reader, unsigned char *))i4)((TextRider__Reader)i6, (unsigned char *)i0);
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_SetType((signed char)0, (TextRider__Scanner *)&s);
  goto l4;
l3:
  i4 = *(int*)(i6-4);
  i0 = i5 + 41;
  i4 = (int)((_Type)i4)->tbprocs[9];
  ((void(*)(TextRider__Reader, unsigned char*, int s_0d))i4)((TextRider__Reader)i6, (unsigned char*)i0, 256);
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_SetType((signed char)1, (TextRider__Scanner *)&s);
l4:
  i0 = i5;
  goto l17;
l5:
  if (!((i3>=65 && i3<=90) || (i3>=97 && i3<=122))) goto l9;
  i4 = i5 + 41;
  i3 = *(int*)(i6-4);
  i3 = (int)((_Type)i3)->tbprocs[11];
  ((void(*)(TextRider__Reader, unsigned char*, int s_0d))i3)((TextRider__Reader)i6, (unsigned char*)i4, 256);
  i3 = (int)*(void**)i2;
  i3 = (int)*(void**)i3;
  i3 = i3 != 0;
  if (i3) goto l6;
  i3 = i5 + 12;
  i3 = *(unsigned int*)i3;
  i3 = (i3 & ((unsigned int)1 << 1)) != 0;
  if (!(i3)) goto l6;
  i3 = strcmp((const char*) i4, (const char*) (int)_c2) == 0;
  if (i3) goto l7;
  i4 = strcmp((const char*) i4, (const char*) (int)_c3) == 0;
  if (i4) goto l7;
l6:
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_SetType((signed char)8, (TextRider__Scanner *)&s);
  goto l8;
l7:
  i4 = i5 + 304;
  *(unsigned char*)i4 = i3;
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_SetType((signed char)4, (TextRider__Scanner *)&s);
l8:
  i0 = i5;
  goto l17;
l9:
  if (!(i3==43 || i3==45)) goto l11;
  i0 = i5 + 12;
  i0 = *(unsigned int*)i0;
  i0 = (i0 & ((unsigned int)1 << 4)) != 0;
  if (i0) goto l10;
  i3 = *(int*)(i6-4);
  i4 = i5 + 40;
  i0 = (int)((_Type)i3)->tbprocs[6];
  i3 = *(unsigned char*)i4;
  ((void(*)(TextRider__Reader, unsigned char *))i0)((TextRider__Reader)i6, (unsigned char *)i4);
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_SetType((signed char)0, (TextRider__Scanner *)&s);
  i0 = i5;
  goto l17;
l10:
  s = (void*)i5;
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_ReadNum((TextRider__Scanner *)&s, &pos, str, &res);
  i0 = (int)s;
  goto l17;
l11:
  if (!((i3>=48 && i3<=57))) goto l12;
  s = (void*)i5;
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_ReadNum((TextRider__Scanner *)&s, &pos, str, &res);
  i0 = (int)s;
  goto l17;
l12:
  if (!(i3==123)) goto l17;
  i4 = i5 + 12;
  i4 = *(unsigned int*)i4;
  i4 = (i4 & ((unsigned int)1 << 2)) != 0;
  if (i4) goto l13;
  i3 = *(int*)(i6-4);
  i0 = i5 + 40;
  i4 = (int)((_Type)i3)->tbprocs[6];
  i3 = *(unsigned char*)i0;
  ((void(*)(TextRider__Reader, unsigned char *))i4)((TextRider__Reader)i6, (unsigned char *)i0);
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_SetType((signed char)0, (TextRider__Scanner *)&s);
  goto l14;
l13:
  i0 = *(int*)(i6-4);
  i3 = i5 + 300;
  i4 = (int)((_Type)i0)->tbprocs[19];
  i0 = *(unsigned int*)i3;
  ((void(*)(TextRider__Reader, unsigned int *))i4)((TextRider__Reader)i6, (unsigned int *)i3);
  s = (void*)i5;
  TextRider__ScannerDesc_Scan_SetType((signed char)5, (TextRider__Scanner *)&s);
l14:
  i0 = i5;
  goto l17;
l15:
  *(short int*)i4 = 7;
  i2 = (int)*(void**)i2;
  i4 = i5 + 24;
  TextRider__SkipEol((TextRider__Reader)i2);
  i2 = *(int*)i4;
  i2++;
  *(int*)i4 = i2;
  i0 = i5;
  goto l17;
l16:
  i3 = i5 + 4;
  i3 = (int)*(void**)i3;
  i3 = TextRider__Consume((TextRider__Reader)i3);
  i0 = i5;
l17:
  i3 = i0 + 4;
  i3 = (int)*(void**)i3;
  i2 = (int)*(void**)i3;
  i3 = i2 == 0;
  if (i3) goto l18;
  i3 = (int)*(void**)i0;
  i3 = i3 != 0;
  if (i3) goto l18;
  *(void**)i0 = (void*)i2;
l18:
  i1 = (int)*(void**)i0;
  i3 = i1 == 0;
  if (i3) goto l19;
  i2 = i1 + 12;
  i3 = (int)*(void**)i2;
  i2 = (int)TextRider__errorContext;
  i2 = i3 != i2;
  if (i2) goto l19;
  i1 += 8;
  i1 = *(int*)i1;
  i2 = i1 == 8;
  if (i2) goto l20;
  i1 = i1 == 1;
  if (i1) goto l20;
l19:
  i3 = i0 + 16;
  *(short int*)i3 = 9;
  goto l21;
l20:
  i1 = i0 + 16;
  *(short int*)i1 = 10;
l21:
  ;
}

void TextRider__ScannerDesc_SetOpts(TextRider__Scanner s, unsigned int opts) {
  register int i0, i1, i2;
  i0 = (int)s + 12;
  *(unsigned int*)i0 = opts;
  i0 = (int)s + 4;
  i0 = (int)*(void**)i0;
  i2 = i0 + 4;
  i1 = opts & 0x1U;
  *(unsigned int*)i2 = i1;
}

void TextRider__ScannerDesc_SetEol(TextRider__Scanner s, const unsigned char* marker__ref, int marker_0d, short int markerLen) {
  register int i0, i1;
  unsigned char* marker;
  char* _old_top_vs = _top_vs;
  _push_value(int, marker, marker__ref, marker_0d);
  i0 = (int)s + 4;
  i0 = (int)*(void**)i0;
  i1 = *(int*)(i0-4);
  i1 = (int)((_Type)i1)->tbprocs[5];
  ((void(*)(TextRider__Reader, const unsigned char*, int marker_0d, short int))i1)((TextRider__Reader)i0, (const unsigned char*)(int)marker, marker_0d, (short int)markerLen);
  _top_vs = _old_top_vs;
}

int TextRider__WriterDesc_Pos(TextRider__Writer w) {
  register int i0, i1;
  i0 = (int)w + 8;
  i0 = (int)*(void**)i0;
  i1 = *(int*)(i0-4);
  i1 = (int)((_Type)i1)->tbprocs[0];
  i0 = ((int(*)(Channel__Writer))i1)((Channel__Writer)i0);
  return (int)i0;
}

void TextRider__WriterDesc_SetPos(TextRider__Writer w, int newPos) {
  register int i0, i1, i2;
  i0 = (int)*(void**)(int)w;
  i0 = i0 != 0;
  if (i0) goto l0;
  i1 = (int)w + 8;
  i2 = (int)*(void**)i1;
  i0 = *(int*)(i2-4);
  i0 = (int)((_Type)i0)->tbprocs[1];
  ((void(*)(Channel__Writer, int))i0)((Channel__Writer)i2, (int)newPos);
  i1 = (int)*(void**)i1;
  i1 += 4;
  i1 = (int)*(void**)i1;
  *(void**)(int)w = (void*)i1;
l0:
  ;
}

void TextRider__WriterDesc_ClearError(TextRider__Writer w) {
  register int i0, i1;
  i0 = (int)w + 8;
  i0 = (int)*(void**)i0;
  i1 = *(int*)(i0-4);
  i1 = (int)((_Type)i1)->tbprocs[4];
  ((void(*)(Channel__Writer))i1)((Channel__Writer)i0);
  *(void**)(int)w = (void*)0;
}

void TextRider__WriterDesc_SetOpts(TextRider__Writer w, unsigned int opts) {
  register int i0;
  i0 = (int)w + 4;
  *(unsigned int*)i0 = opts;
}

void TextRider__WriterDesc_SetEol(TextRider__Writer w, const unsigned char* marker__ref, int marker_0d, short int markerLen) {
  register int i0, i1, i2, i3, i4, i5, i6, i7;
  unsigned char* marker;
  char* _old_top_vs = _top_vs;
  _push_value(int, marker, marker__ref, marker_0d);
  i0 = (int)*(void**)(int)w;
  i0 = i0 != 0;
  if (i0) goto l3;
  i6 = markerLen < 0;
  if (i6) goto l2;
  i6 = markerLen > 2;
  if (i6) goto l2;
  i1 = markerLen - 1;
  i0 = i1 < 0;
  if (i0) goto l1;
  i0 = (int)w + 16;
  i5 = 0;
l0:
  i2 = (int)marker + i5;
  i4 = i5 + i0;
  i3 = i5 + 1;
  i7 = *(unsigned char*)i2;
  i2 = i3 > i1;
  *(unsigned char*)i4 = i7;
  if (i2) goto l1;
  i5 = i3;
  goto l0;
l1:
  i0 = (int)w + 18;
  *(short int*)i0 = markerLen;
  goto l3;
l2:
  i6 = (int)TextRider__GetError((int)8);
  *(void**)(int)w = (void*)i6;
l3:
  _top_vs = _old_top_vs;
}

void TextRider__WriterDesc_WriteString(TextRider__Writer w, const unsigned char* s, int s_0d) {
  register int i0, i1, i2, i3;
  i0 = (int)*(void**)(int)w;
  i0 = i0 != 0;
  if (i0) goto l0;
  i2 = (int)w + 8;
  i1 = (int)*(void**)i2;
  i0 = *(int*)(i1-4);
  i3 = Strings__Length((const unsigned char*)(int)s, s_0d);
  i0 = (int)((_Type)i0)->tbprocs[3];
  ((void(*)(Channel__Writer, unsigned char*, int x_0d, int, int))i0)((Channel__Writer)i1, (unsigned char*)(int)s, s_0d, (int)0, (int)i3);
  i2 = (int)*(void**)i2;
  i2 += 4;
  i2 = (int)*(void**)i2;
  *(void**)(int)w = (void*)i2;
  i2 = (int)w + 4;
  i2 = *(unsigned int*)i2;
  i2 = (i2 & ((unsigned int)1 << 0)) != 0;
  if (!(i2)) goto l0;
  i3 = (int)*(void**)(int)w;
  i3 = i3 != 0;
  if (i3) goto l0;
  i1 = (int)w + 12;
  i2 = (int)*(void**)i1;
  i3 = *(int*)(i2-4);
  i3 = (int)((_Type)i3)->tbprocs[4];
  ((void(*)(Channel__Channel))i3)((Channel__Channel)i2);
  i1 = (int)*(void**)i1;
  i1 = (int)*(void**)i1;
  *(void**)(int)w = (void*)i1;
l0:
  ;
}

void TextRider__WriterDesc_WriteBool(TextRider__Writer w, unsigned char bool_) {
  register int i0;
  if (bool_) goto l0;
  i0 = *(int*)((int)w-4);
  i0 = (int)((_Type)i0)->tbprocs[5];
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i0)((TextRider__Writer)(int)w, (const unsigned char*)(int)_c3, 6);
  goto l1;
l0:
  i0 = *(int*)((int)w-4);
  i0 = (int)((_Type)i0)->tbprocs[5];
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i0)((TextRider__Writer)(int)w, (const unsigned char*)(int)_c2, 5);
l1:
  ;
}

void TextRider__WriterDesc_WriteChar(TextRider__Writer w, unsigned char ch) {
  register int i0, i1, i2;
  i0 = (int)*(void**)(int)w;
  i0 = i0 != 0;
  if (i0) goto l0;
  i1 = (int)w + 8;
  i1 = (int)*(void**)i1;
  i2 = *(int*)(i1-4);
  i2 = (int)((_Type)i2)->tbprocs[2];
  ((void(*)(Channel__Writer, unsigned char))i2)((Channel__Writer)i1, (unsigned char)(int)ch);
  i1 = (int)w + 4;
  i1 = *(unsigned int*)i1;
  i1 = (i1 & ((unsigned int)1 << 0)) != 0;
  if (!(i1)) goto l0;
  i2 = (int)*(void**)(int)w;
  i2 = i2 != 0;
  if (i2) goto l0;
  i1 = (int)w + 12;
  i0 = (int)*(void**)i1;
  i2 = *(int*)(i0-4);
  i2 = (int)((_Type)i2)->tbprocs[4];
  ((void(*)(Channel__Channel))i2)((Channel__Channel)i0);
  i1 = (int)*(void**)i1;
  i1 = (int)*(void**)i1;
  *(void**)(int)w = (void*)i1;
l0:
  ;
}

void TextRider__WritePad(TextRider__Writer w, int n) {
  register int i0, i1, i2;
  i0 = n <= 0;
  if (i0) goto l1;
  i1 = *(int*)((int)w-4);
  i0 = (int)((_Type)i1)->tbprocs[7];
  i1 = n;
l0:
  i1--;
  i2 = i1 > 0;
  ((void(*)(TextRider__Writer, unsigned char))i0)((TextRider__Writer)(int)w, (unsigned char)32);
  if (i2) goto l0;
l1:
  ;
}

void TextRider__WriterDesc_WriteLInt(TextRider__Writer w, int lint, int n) {
  register int i0, i1;
  unsigned char val[16];
  IntStr__IntToStr((int)lint, (unsigned char*)(int)val, 16);
  i0 = Strings__Length((const unsigned char*)(int)val, 16);
  i1 = n - i0;
  i0 = *(int*)((int)w-4);
  TextRider__WritePad((TextRider__Writer)(int)w, (int)i1);
  i0 = (int)((_Type)i0)->tbprocs[5];
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i0)((TextRider__Writer)(int)w, (const unsigned char*)(int)val, 16);
}

void TextRider__WriterDesc_WriteSInt(TextRider__Writer w, signed char sint, int n) {
  register int i0;
  i0 = *(int*)((int)w-4);
  i0 = (int)((_Type)i0)->tbprocs[8];
  ((void(*)(TextRider__Writer, int, int))i0)((TextRider__Writer)(int)w, (int)sint, (int)n);
}

void TextRider__WriterDesc_WriteInt(TextRider__Writer w, short int int_, int n) {
  register int i0;
  i0 = *(int*)((int)w-4);
  i0 = (int)((_Type)i0)->tbprocs[8];
  ((void(*)(TextRider__Writer, int, int))i0)((TextRider__Writer)(int)w, (int)int_, (int)n);
}

void TextRider__WriterDesc_WriteHex_WriteHexDigits(TextRider__Writer w, int *n, int digits) {
  register int i0, i1, i2, i3;
  i0 = digits > 8;
  if (i0) goto l0;
  i2 = digits;
  goto l4;
l0:
  i2 = digits;
l1:
  i0 = *n;
  i0 = i0 < 0;
  if (i0) goto l2;
  i0 = *(int*)((int)w-4);
  i0 = (int)((_Type)i0)->tbprocs[7];
  ((void(*)(TextRider__Writer, unsigned char))i0)((TextRider__Writer)(int)w, (unsigned char)48);
  goto l3;
l2:
  i0 = *(int*)((int)w-4);
  i0 = (int)((_Type)i0)->tbprocs[7];
  ((void(*)(TextRider__Writer, unsigned char))i0)((TextRider__Writer)(int)w, (unsigned char)70);
l3:
  i2--;
  i0 = i2 > 8;
  if (i0) goto l1;
l4:
  i0 = i2 > 0;
  if (!(i0)) goto l8;
l5:
  i2--;
  i0 = (int)_ashl(i2, 2, (unsigned int));
  i0 = - i0;
  i3 = *n;
  i0 = (int)_ash(i3, i0, (unsigned int));
  i3 = i0 & 0xFU;
  i0 = i3 <= 9;
  if (i0) goto l6;
  i1 = i3 + 55;
  i0 = *(int*)((int)w-4);
  i0 = (int)((_Type)i0)->tbprocs[7];
  ((void(*)(TextRider__Writer, unsigned char))i0)((TextRider__Writer)(int)w, (unsigned char)i1);
  goto l7;
l6:
  i3 += 48;
  i0 = *(int*)((int)w-4);
  i0 = (int)((_Type)i0)->tbprocs[7];
  ((void(*)(TextRider__Writer, unsigned char))i0)((TextRider__Writer)(int)w, (unsigned char)i3);
l7:
  i0 = i2 > 0;
  if (i0) goto l5;
l8:
  ;
}

void TextRider__WriterDesc_WriteHex(TextRider__Writer w, int lint, int d) {
  register int i0;
  i0 = d <= 0;
  if (i0) goto l0;
  i0 = d;
  goto l1;
l0:
  i0 = 8;
l1:
  TextRider__WriterDesc_WriteHex_WriteHexDigits((TextRider__Writer)(int)w, (int *)(int)&lint, (int)i0);
}

void TextRider__WriterDesc_WriteLReal(TextRider__Writer w, double lreal, int n, int k) {
  register int i0, i1;
  unsigned char val[128];
  LRealStr__RealToFloat((double)lreal, (short int)k, (unsigned char*)(int)val, 128);
  i0 = Strings__Length((const unsigned char*)(int)val, 128);
  i1 = n - i0;
  i0 = *(int*)((int)w-4);
  TextRider__WritePad((TextRider__Writer)(int)w, (int)i1);
  i0 = (int)((_Type)i0)->tbprocs[5];
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i0)((TextRider__Writer)(int)w, (const unsigned char*)(int)val, 128);
}

void TextRider__WriterDesc_WriteReal(TextRider__Writer w, float real, int n, int k) {
  register int i0, i1;
  unsigned char val[128];
  RealStr__RealToFloat((float)real, (short int)k, (unsigned char*)(int)val, 128);
  i0 = Strings__Length((const unsigned char*)(int)val, 128);
  i1 = n - i0;
  i0 = *(int*)((int)w-4);
  TextRider__WritePad((TextRider__Writer)(int)w, (int)i1);
  i0 = (int)((_Type)i0)->tbprocs[5];
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i0)((TextRider__Writer)(int)w, (const unsigned char*)(int)val, 128);
}

void TextRider__WriterDesc_WriteLRealFix(TextRider__Writer w, double *lreal, int n, int k) {
  register int i0, i1;
  register double d0;
  unsigned char val[128];
  d0 = *lreal;
  LRealStr__RealToFixed((double)d0, (short int)k, (unsigned char*)(int)val, 128);
  i0 = Strings__Length((const unsigned char*)(int)val, 128);
  i1 = n - i0;
  i0 = *(int*)((int)w-4);
  TextRider__WritePad((TextRider__Writer)(int)w, (int)i1);
  i0 = (int)((_Type)i0)->tbprocs[5];
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i0)((TextRider__Writer)(int)w, (const unsigned char*)(int)val, 128);
}

void TextRider__WriterDesc_WriteRealFix(TextRider__Writer w, float real, int n, int k) {
  register int i0, i1;
  unsigned char val[128];
  RealStr__RealToFixed((float)real, (short int)k, (unsigned char*)(int)val, 128);
  i0 = Strings__Length((const unsigned char*)(int)val, 128);
  i1 = n - i0;
  i0 = *(int*)((int)w-4);
  TextRider__WritePad((TextRider__Writer)(int)w, (int)i1);
  i0 = (int)((_Type)i0)->tbprocs[5];
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i0)((TextRider__Writer)(int)w, (const unsigned char*)(int)val, 128);
}

void TextRider__WriterDesc_WriteLRealEng(TextRider__Writer w, double *lreal, int n, int k) {
  register int i0, i1;
  register double d0;
  unsigned char val[128];
  d0 = *lreal;
  LRealStr__RealToEng((double)d0, (short int)k, (unsigned char*)(int)val, 128);
  i0 = Strings__Length((const unsigned char*)(int)val, 128);
  i1 = n - i0;
  i0 = *(int*)((int)w-4);
  TextRider__WritePad((TextRider__Writer)(int)w, (int)i1);
  i0 = (int)((_Type)i0)->tbprocs[5];
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i0)((TextRider__Writer)(int)w, (const unsigned char*)(int)val, 128);
}

void TextRider__WriterDesc_WriteRealEng(TextRider__Writer w, float real, int n, int k) {
  register int i0, i1;
  unsigned char val[128];
  RealStr__RealToEng((float)real, (short int)k, (unsigned char*)(int)val, 128);
  i0 = Strings__Length((const unsigned char*)(int)val, 128);
  i1 = n - i0;
  i0 = *(int*)((int)w-4);
  TextRider__WritePad((TextRider__Writer)(int)w, (int)i1);
  i0 = (int)((_Type)i0)->tbprocs[5];
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i0)((TextRider__Writer)(int)w, (const unsigned char*)(int)val, 128);
}

void TextRider__WriterDesc_WriteSet(TextRider__Writer w, unsigned int s) {
  register int i0, i1, i2, i3, i4, i5, i6, i7, i8;
  i0 = *(int*)((int)w-4);
  i4 = (int)((_Type)i0)->tbprocs[7];
  i7 = (int)((_Type)i0)->tbprocs[10];
  i5 = (int)((_Type)i0)->tbprocs[5];
  i6 = (int)((_Type)i0)->tbprocs[5];
  ((void(*)(TextRider__Writer, unsigned char))i4)((TextRider__Writer)(int)w, (unsigned char)123);
  i3 = 0;
  i2 = 0;
l0:
  i1 = (s & ((unsigned int)1 << i3)) != 0;
  if (i1) goto l1;
  i8 = i3;
  goto l7;
l1:
  i0 = i3 < 31;
  if (!(i2)) goto l2;
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i5)((TextRider__Writer)(int)w, (const unsigned char*)(int)_c4, 3);
l2:
  if (!(i0)) goto l4;
  i1 = i3 + 1;
  i1 = (s & ((unsigned int)1 << i1)) != 0;
  if (!(i1)) goto l4;
  i8 = i3;
l3:
  i8++;
  i0 = i8 >= 31;
  if (i0) goto l5;
  i0 = i8 + 1;
  i0 = (s & ((unsigned int)1 << i0)) != 0;
  if (i0) goto l3;
  goto l5;
l4:
  i8 = i3;
l5:
  i0 = i3 < i8;
  ((void(*)(TextRider__Writer, short int, int))i7)((TextRider__Writer)(int)w, (short int)i3, (int)0);
  if (!(i0)) goto l6;
  ((void(*)(TextRider__Writer, const unsigned char*, int s_0d))i6)((TextRider__Writer)(int)w, (const unsigned char*)(int)_c5, 3);
  ((void(*)(TextRider__Writer, short int, int))i7)((TextRider__Writer)(int)w, (short int)i8, (int)0);
l6:
  i2 = 1;
l7:
  i3 = i8 + 1;
  i1 = i3 <= 31;
  if (i1) goto l0;
  ((void(*)(TextRider__Writer, unsigned char))i4)((TextRider__Writer)(int)w, (unsigned char)125);
}

void TextRider__WriterDesc_WriteLn(TextRider__Writer w) {
  register int i0, i1, i2, i3, i4, i5;
  i0 = (int)w + 18;
  i0 = *(short int*)i0;
  i4 = i0 - 1;
  i0 = i4 < 0;
  if (i0) goto l1;
  i5 = (int)w + 16;
  i3 = *(int*)((int)w-4);
  i1 = (int)((_Type)i3)->tbprocs[7];
  i2 = 0;
l0:
  i0 = i2 + i5;
  i3 = i2 + 1;
  i0 = *(unsigned char*)i0;
  i2 = i3 > i4;
  ((void(*)(TextRider__Writer, unsigned char))i1)((TextRider__Writer)(int)w, (unsigned char)i0);
  if (i2) goto l1;
  i2 = i3;
  goto l0;
l1:
  ;
}

void TextRider__InitReader(TextRider__Reader r, Channel__Channel ch) {
  register int i0, i1;
  i0 = (int)r + 4;
  i1 = *(int*)((int)ch-4);
  *(void**)(int)r = (void*)0;
  i1 = (int)((_Type)i1)->tbprocs[2];
  *(unsigned int*)i0 = 0x0U;
  i1 = (int)((Channel__Reader(*)(Channel__Channel))i1)((Channel__Channel)(int)ch);
  i0 = (int)r + 8;
  *(void**)i0 = (void*)i1;
  i0 = (int)r + 12;
  *(void**)i0 = (void*)(int)ch;
  i0 = (int)r + 18;
  *(short int*)i0 = -1;
  i0 = (int)r + 20;
  *(unsigned char*)i0 = 0;
  i0 = (int)r + 32;
  *(short int*)i0 = 0;
}

TextRider__Reader TextRider__ConnectReader(Channel__Channel ch) {
  register int i0, i1;
  {
    char *_mem, *_var;
    _mem = GC_malloc(36+8);
    if (!_mem) _new_failed(_P(46213));
    _var = _mem+8;
    ((_Type*)_var)[-1] = &TextRider__ReaderDesc_td.td;
    i1 = (int)_var;
  }
  i0 = i1 + 8;
  TextRider__InitReader((TextRider__Reader)i1, (Channel__Channel)(int)ch);
  i0 = (int)*(void**)i0;
  i0 = i0 != 0;
  if (i0) goto l0;
  i1 = 0;
l0:
  return (void*)i1;
}

void TextRider__InitWriter(TextRider__Writer w, Channel__Channel ch) {
  register int i0, i1, i2, i3, i4, i5, i6;
  i0 = (int)w + 4;
  i1 = *(int*)((int)ch-4);
  *(void**)(int)w = (void*)0;
  i1 = (int)((_Type)i1)->tbprocs[3];
  *(unsigned int*)i0 = 0x0U;
  i1 = (int)((Channel__Writer(*)(Channel__Channel))i1)((Channel__Channel)(int)ch);
  i0 = (int)w + 8;
  *(void**)i0 = (void*)i1;
  i0 = (int)w + 12;
  *(void**)i0 = (void*)(int)ch;
  i0 = (int)w + 18;
  i1 = Strings__Length((const unsigned char*)(int)CharClass__systemEol, 3);
  *(short int*)i0 = i1;
  i0 = *(short int*)i0;
  i5 = i0 - 1;
  i0 = i5 < 0;
  if (i0) goto l1;
  i0 = (int)w + 16;
  i6 = 0;
l0:
  i1 = i6 + i0;
  i3 = (int)CharClass__systemEol + i6;
  i2 = i6 + 1;
  i4 = *(unsigned char*)i3;
  i3 = i2 > i5;
  *(unsigned char*)i1 = i4;
  if (i3) goto l1;
  i6 = i2;
  goto l0;
l1:
  ;
}

TextRider__Writer TextRider__ConnectWriter(Channel__Channel ch) {
  register int i0, i1;
  {
    char *_mem, *_var;
    _mem = GC_malloc(20+8);
    if (!_mem) _new_failed(_P(46892));
    _var = _mem+8;
    ((_Type*)_var)[-1] = &TextRider__WriterDesc_td.td;
    i1 = (int)_var;
  }
  i0 = i1 + 8;
  TextRider__InitWriter((TextRider__Writer)i1, (Channel__Channel)(int)ch);
  i0 = (int)*(void**)i0;
  i0 = i0 != 0;
  if (i0) goto l0;
  i1 = 0;
l0:
  return (void*)i1;
}

void TextRider__InitScanner(TextRider__Scanner s, Channel__Channel ch) {
  register int i0, i1;
  *(void**)(int)s = (void*)0;
  i1 = (int)TextRider__ConnectReader((Channel__Channel)(int)ch);
  i0 = (int)s + 4;
  *(void**)i0 = (void*)i1;
  i0 = (int)s + 12;
  *(unsigned int*)i0 = 0x1EU;
  i0 = (int)s + 16;
  *(short int*)i0 = -1;
  i0 = (int)s + 24;
  *(int*)i0 = 0;
  i0 = (int)s + 8;
  *(void**)i0 = (void*)(int)ch;
}

TextRider__Scanner TextRider__ConnectScanner(Channel__Channel ch) {
  register int i0, i1;
  {
    char *_mem, *_var;
    _mem = GC_malloc(312+8);
    if (!_mem) _new_failed(_P(47444));
    _var = _mem+8;
    ((_Type*)_var)[-1] = &TextRider__ScannerDesc_td.td;
    i1 = (int)_var;
  }
  i0 = i1 + 4;
  TextRider__InitScanner((TextRider__Scanner)i1, (Channel__Channel)(int)ch);
  i0 = (int)*(void**)i0;
  i0 = i0 != 0;
  if (i0) goto l0;
  i1 = 0;
l0:
  return (void*)i1;
}

void TextRider_init(void) {
  register int i0;
  _mid = _register_module(&TextRider_md.md, &TextRider__ErrorContextDesc_td.td);
  {
    char *_mem, *_var;
    _mem = GC_malloc(4+8);
    if (!_mem) _new_failed(_P(47582));
    _var = _mem+8;
    ((_Type*)_var)[-1] = &TextRider__ErrorContextDesc_td.td;
    i0 = (int)_var;
  }
  Msg__InitContext((Msg__Context)i0, (const Msg__String)(int)_c6, 19);
  TextRider__errorContext = (void*)i0;
}
