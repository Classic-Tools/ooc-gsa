/* file generated by oo2c -- do not edit */
#include "__oo2c.h"
#include "__libc.h"
#include "Strings2.d"

static _ModId _mid;

void Strings2__AppendChar(unsigned char ch, unsigned char* dst, int dst_0d) {
  register int i0, i1, i2;
  i1 = Strings__Length((const unsigned char*)(int)dst, dst_0d);
  i0 = dst_0d - 1;
  i0 = i1 >= i0;
  if (i0) goto l0;
  i2 = i1 + 1;
  i0 = (int)dst + i1;
  *(unsigned char*)i0 = (int)ch;
  i0 = (int)dst + i2;
  *(unsigned char*)i0 = 0;
l0:
  ;
}

void Strings2__InsertChar(unsigned char ch, short int pos, unsigned char* dst, int dst_0d) {
  register int i0;
  unsigned char src[2];
  i0 = (int)src + 1;
  *(unsigned char*)(int)src = (int)ch;
  *(unsigned char*)i0 = 0;
  Strings__Insert((const unsigned char*)(int)src, 2, (short int)pos, (unsigned char*)(int)dst, dst_0d);
}

short int Strings2__PosChar(unsigned char ch, const unsigned char* str, int str_0d) {
  register int i0, i1, i2, i3, i4;
  i0 = 0;
l0:
  i3 = (int)str + i0;
  i3 = *(unsigned char*)i3;
  i2 = (int)ch == i3;
  if (i2) goto l3;
  i1 = i3 == 0;
  if (i1) goto l1;
  i2 = i0 + 1;
  goto l2;
l1:
  i2 = i0;
  i4 = -1;
l2:
  i0 = i2;
  goto l4;
l3:
  i4 = i0;
  i1 = 1;
l4:
  if (!(i1)) goto l0;
  return (short int)i4;
}

unsigned char Strings2__Match_RecMatch(unsigned char* src, int src_0d, short int posSrc, unsigned char* pat, int pat_0d, short int posPat, short int *Strings2__Match_lenSource, short int *Strings2__Match_lenPattern) {
  register int i0, i1, i2, i3, i4, i5, i6, i7, i8;
  i7 = *Strings2__Match_lenSource;
  i4 = posPat;
  i1 = posSrc;
l0:
  i6 = i1 == i7;
  if (!(i6)) goto l1;
  i6 = *Strings2__Match_lenPattern;
  i6 = i4 == i6;
  if (i6) goto l14;
l1:
  i0 = *Strings2__Match_lenPattern;
  i6 = i4 == i0;
  if (i6) goto l12;
  i6 = (int)pat + i4;
  i6 = *(unsigned char*)i6;
  i8 = i6 == 42;
  if (i8) goto l4;
  i3 = i6 == 63;
  if (i3) goto l2;
  i3 = (int)src + i1;
  i3 = *(unsigned char*)i3;
  i6 = i6 != i3;
  if (i6) goto l3;
l2:
  i3 = i1 + 1;
  i5 = i4 + 1;
  i2 = 0;
  goto l13;
l3:
  i5 = i4;
  i3 = i1;
  i8 = 0;
  i2 = 1;
  goto l13;
l4:
  i5 = i0 - 1;
  i5 = i4 == i5;
  if (i5) goto l10;
  i3 = i1 <= i7;
  if (i3) goto l5;
  i5 = 0;
  goto l9;
l5:
  i3 = i4 + 1;
  i6 = i1;
l6:
  i5 = Strings2__Match_RecMatch((unsigned char*)(int)src, src_0d, (short int)i6, (unsigned char*)(int)pat, pat_0d, (short int)i3, &*Strings2__Match_lenSource, &*Strings2__Match_lenPattern);
  if (i5) goto l7;
  i5 = 0;
  goto l8;
l7:
  i8 = 1;
  i5 = 1;
l8:
  i6++;
  if (i5) goto l9;
  i2 = i7 >= i6;
  if (i2) goto l6;
l9:
  if (i5) goto l11;
  i8 = 0;
  goto l11;
l10:
  i8 = 1;
l11:
  i3 = i1;
  i5 = i4;
  i2 = 1;
  goto l13;
l12:
  i5 = i4;
  i3 = i1;
  i8 = 0;
  i2 = 1;
l13:
  i1 = i3;
  i4 = i5;
  goto l15;
l14:
  i8 = 1;
  i2 = 1;
l15:
  if (!(i2)) goto l0;
  return (unsigned char)i8;
}

unsigned char Strings2__Match(const unsigned char* pat__ref, int pat_0d, const unsigned char* s__ref, int s_0d) {
  register int i0, i1;
  short int lenPattern;
  short int lenSource;
  unsigned char* pat;
  unsigned char* s;
  char* _old_top_vs = _top_vs;
  _push_value(int, pat, pat__ref, pat_0d);
  _push_value(int, s, s__ref, s_0d);
  i1 = Strings__Length((const unsigned char*)(int)pat, pat_0d);
  i0 = Strings__Length((const unsigned char*)(int)s, s_0d);
  lenSource = (short int)i0;
  lenPattern = (short int)i1;
  i0 = Strings2__Match_RecMatch((unsigned char*)(int)s, s_0d, (short int)0, (unsigned char*)(int)pat, pat_0d, (short int)0, &lenSource, &lenPattern);
  _top_vs = _old_top_vs;
  return (unsigned char)i0;
}

void Strings2_init(void) {
  _mid = _register_module(&Strings2_md.md, NULL);
}
