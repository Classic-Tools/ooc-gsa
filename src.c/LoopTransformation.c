/* file generated by oo2c -- do not edit */
#include "__oo2c.h"
#include "__libc.h"
#include "LoopTransformation.d"

static _ModId _mid;

int LoopTransformation__AnalyseLoop_Category(Data__Opnd opnd, Data__Region *LoopTransformation__AnalyseLoop_loop) {
  register int i0, i1, i2, i3, i4;
  i3 = (int)*(void**)(int)opnd;
  i2 = *(int*)(i3-4);
  i0 = _type_test(i2, &Data__ConstDesc_td.td, 3);
  if (i0) goto l10;
  i1 = _type_test(i2, &Data__ObjectDesc_td.td, 4);
  if (i1) goto l9;
  i0 = _type_test(i2, &Data__StructDesc_td.td, 4);
  if (i0) goto l8;
  i1 = _type_test(i2, &Data__RegionDesc_td.td, 5);
  if (i1) goto l7;
  i2 = _type_test(i2, &Data__ResultDesc_td.td, 3);
  if (i2) goto l0;
  goto l11;
l0:
  i3 += 16;
  i3 = (int)*(void**)i3;
  i2 = (int)*LoopTransformation__AnalyseLoop_loop;
  i0 = i3 + 32;
  i1 = (int)*(void**)i0;
  i4 = i1 == i2;
  if (i4) goto l6;
  i1 = Data__RegionDesc_Dominates((Data__Region)i2, (Data__Region)i1);
  if (i1) goto l1;
  i4 = 0;
  goto l11;
l1:
  i0 = (int)*(void**)i0;
  i4 = i0 != i2;
  if (i4) goto l2;
  i4 = 0;
  goto l4;
l2:
  i1 = i0 + 44;
  i1 = *(short int*)i1;
  i4 = i1 == 82;
  if (i4) goto l3;
  i1 = i0 + 32;
  i1 = (int)*(void**)i1;
  i0 = i1;
l3:
  if (i4) goto l4;
  i1 = i0 != i2;
  if (i1) goto l2;
l4:
  if (i4) goto l5;
  i4 = i3 + 8;
  i4 = *(int*)i4;
  goto l11;
l5:
  i4 = 2;
  goto l11;
l6:
  i3 += 8;
  i4 = *(int*)i3;
  goto l11;
l7:
  i4 = 2;
  goto l11;
l8:
  i4 = 0;
  goto l11;
l9:
  i4 = 0;
  goto l11;
l10:
  i4 = 0;
l11:
  return (int)i4;
}

void LoopTransformation__AnalyseLoop_FillWorklist(Data__Region region, Data__Region *LoopTransformation__AnalyseLoop_loop, Worklist__Worklist *LoopTransformation__AnalyseLoop_worklist) {
  register int i0, i1, i2;
  i0 = (int)*LoopTransformation__AnalyseLoop_loop;
  i0 = (int)region == i0;
  if (i0) goto l0;
  i0 = (int)region + 44;
  i0 = *(short int*)i0;
  i0 = i0 == 82;
  if (i0) goto l5;
l0:
  i1 = (int)region + 56;
  i2 = (int)*(void**)i1;
  i1 = i2 == 0;
  if (i1) goto l5;
  i1 = (int)((_Type)&Worklist__Worklist_td.td)->tbprocs[9];
l1:
  i0 = *(int*)(i2-4);
  i0 = _type_test(i0, &Data__RegionDesc_td.td, 5);
  if (i0) goto l3;
  i0 = i2 + 48;
  i0 = *(unsigned int*)i0;
  i0 = (i0 & ((unsigned int)1 << 7)) != 0;
  if (i0) goto l2;
  ((void(*)(Worklist__Worklist *, _Type wl__tag, Data__Info))i1)((Worklist__Worklist *)(int)LoopTransformation__AnalyseLoop_worklist, &Worklist__Worklist_td.td, (Data__Info)i2);
  goto l4;
l2:
  i0 = i2 + 8;
  *(int*)i0 = 2;
  goto l4;
l3:
  LoopTransformation__AnalyseLoop_FillWorklist((Data__Region)i2, (Data__Region *)&*LoopTransformation__AnalyseLoop_loop, &*LoopTransformation__AnalyseLoop_worklist);
l4:
  i0 = i2 + 36;
  i2 = (int)*(void**)i0;
  i0 = i2 != 0;
  if (i0) goto l1;
l5:
  ;
}

unsigned char LoopTransformation__AnalyseLoop_MarkedInstr(Data__Instruction instr, Data__Region *LoopTransformation__AnalyseLoop_loop) {
  register int i0, i1, i2, i3;
  i2 = (int)*LoopTransformation__AnalyseLoop_loop;
  i1 = (int)instr + 32;
  i0 = (int)*(void**)i1;
  i3 = i0 == i2;
  if (i3) goto l5;
  i0 = Data__RegionDesc_Dominates((Data__Region)i2, (Data__Region)i0);
  if (i0) goto l0;
  i3 = 0;
  goto l6;
l0:
  i3 = (int)*(void**)i1;
  i1 = i3 != i2;
  if (i1) goto l1;
  i0 = 0;
  goto l3;
l1:
  i1 = i3 + 44;
  i1 = *(short int*)i1;
  i0 = i1 == 82;
  if (i0) goto l2;
  i1 = i3 + 32;
  i1 = (int)*(void**)i1;
  i3 = i1;
l2:
  if (i0) goto l3;
  i1 = i3 != i2;
  if (i1) goto l1;
l3:
  if (i0) goto l4;
  i3 = 1;
  goto l6;
l4:
  i3 = 0;
  goto l6;
l5:
  i3 = 1;
l6:
  return (unsigned char)i3;
}

void LoopTransformation__AnalyseLoop(Data__Region loop) {
  register int i0, i1, i2, i3, i4, i5, i6, i7, i8, i9, i10;
  Worklist__Worklist worklist;
  i0 = (int)((_Type)&Worklist__Worklist_td.td)->tbprocs[0];
  i9 = (int)((_Type)&Worklist__Worklist_td.td)->tbprocs[13];
  ((void(*)(Worklist__Worklist *, _Type wl__tag))i0)((Worklist__Worklist *)(int)&worklist, &Worklist__Worklist_td.td);
  LoopTransformation__AnalyseLoop_FillWorklist((Data__Region)(int)loop, (Data__Region *)&loop, &worklist);
  i0 = ((unsigned char(*)(Worklist__Worklist *, _Type wl__tag))i9)((Worklist__Worklist *)(int)&worklist, &Worklist__Worklist_td.td);
  if (i0) goto l22;
  i1 = (int)((_Type)&Worklist__Worklist_td.td)->tbprocs[15];
  i10 = (int)((_Type)&Worklist__Worklist_td.td)->tbprocs[18];
  i0 = (int)((_Type)&Worklist__Worklist_td.td)->tbprocs[9];
  i3 = (int)loop;
l0:
  i2 = (int)((Data__Info(*)(Worklist__Worklist *, _Type wl__tag))i1)((Worklist__Worklist *)(int)&worklist, &Worklist__Worklist_td.td);
  i4 = *(int*)(i2-4);
  i4 = _type_test(i4, &Data__GateDesc_td.td, 5);
  ((void(*)(Worklist__Worklist *, _Type wl__tag))i10)((Worklist__Worklist *)(int)&worklist, &Worklist__Worklist_td.td);
  if (i4) goto l9;
  i8 = i2 + 44;
  i6 = *(short int*)i8;
  i7 = (short int)_ashr(i6, 4, (unsigned short int));
  i8 = i7 == 8;
  if (i8) goto l7;
  i8 = i7 == 9;
  if (i8) goto l7;
  i4 = i2 + 32;
  i4 = (int)*(void**)i4;
  i4 = i3 == i4;
  if (i4) goto l2;
  i4 = i7 == 2;
  if (i4) goto l1;
  i7 = i7 == 3;
  if (i7) goto l1;
  i7 = i6 == 23;
  if (i7) goto l1;
  i6 = i6 == 22;
  if (i6) goto l1;
  i6 = Data__InstructionDesc_MayTrap((Data__Instruction)i2);
  if (!(i6)) goto l2;
l1:
  i5 = i3;
  i4 = 2;
  goto l13;
l2:
  i5 = i2 + 28;
  i7 = (int)*(void**)i5;
  i5 = i7 != 0;
  if (i5) goto l3;
  i5 = i3;
  i4 = 0;
  goto l13;
l3:
  i4 = 0;
  i5 = i3;
l4:
  loop = (void*)i5;
  loop = (void*)i5;
  i5 = LoopTransformation__AnalyseLoop_Category((Data__Opnd)i7, (Data__Region *)&loop);
  i5 = i5 == 0;
  if (i5) goto l5;
  i4 = 2;
l5:
  i5 = i7 + 8;
  i7 = (int)*(void**)i5;
  i5 = i7 == 0;
  if (i5) goto l6;
  i5 = (int)loop;
  goto l4;
l6:
  i5 = (int)loop;
  goto l13;
l7:
  i7 = i2 + 28;
  i8 = (int)*(void**)i7;
  loop = (void*)i3;
  loop = (void*)i3;
  i4 = LoopTransformation__AnalyseLoop_Category((Data__Opnd)i8, (Data__Region *)&loop);
  i7 = (int)*(void**)i7;
  i7 += 8;
  i7 = (int)*(void**)i7;
  i7 = LoopTransformation__AnalyseLoop_Category((Data__Opnd)i7, (Data__Region *)&loop);
  i8 = i4 > i7;
  if (i8) goto l8;
  i4 = i7;
l8:
  i5 = (int)loop;
  goto l13;
l9:
  i4 = i2 + 32;
  i4 = (int)*(void**)i4;
  i4 = i3 == i4;
  if (i4) goto l10;
  i4 = 2;
  i5 = i3;
  goto l13;
l10:
  i4 = i2 + 28;
  i4 = (int)*(void**)i4;
  i4 += 8;
  i4 = (int)*(void**)i4;
  i4 += 8;
  i4 = (int)*(void**)i4;
  loop = (void*)i3;
  loop = (void*)i3;
  i4 = LoopTransformation__AnalyseLoop_Category((Data__Opnd)i4, (Data__Region *)&loop);
  i4 = i4 == 2;
  if (i4) goto l11;
  i4 = 1;
  goto l12;
l11:
  i4 = 2;
l12:
  i5 = (int)loop;
l13:
  i7 = i2 + 8;
  i3 = *(int*)i7;
  i3 = i4 != i3;
  if (i3) goto l14;
  i3 = i5;
  goto l21;
l14:
  i6 = i2 != 0;
  *(int*)i7 = i4;
  if (i6) goto l15;
  i3 = i5;
  goto l21;
l15:
  i3 = i5;
l16:
  i8 = (int)*(void**)i2;
  i4 = i8 == 0;
  if (i4) goto l20;
  i4 = i3;
l17:
  i6 = i8 + 12;
  i7 = (int)*(void**)i6;
  loop = (void*)i4;
  loop = (void*)i4;
  i4 = LoopTransformation__AnalyseLoop_MarkedInstr((Data__Instruction)i7, (Data__Region *)&loop);
  if (!(i4)) goto l18;
  i6 = (int)*(void**)i6;
  i4 = i6 + 8;
  i4 = *(int*)i4;
  i4 = i4 == 2;
  if (i4) goto l18;
  ((void(*)(Worklist__Worklist *, _Type wl__tag, Data__Info))i0)((Worklist__Worklist *)(int)&worklist, &Worklist__Worklist_td.td, (Data__Info)i6);
l18:
  i4 = i8 + 4;
  i8 = (int)*(void**)i4;
  i4 = i8 == 0;
  if (i4) goto l19;
  i4 = (int)loop;
  goto l17;
l19:
  i3 = (int)loop;
l20:
  i4 = i2 + 12;
  i2 = (int)*(void**)i4;
  i4 = i2 != 0;
  if (i4) goto l16;
l21:
  i2 = ((unsigned char(*)(Worklist__Worklist *, _Type wl__tag))i9)((Worklist__Worklist *)(int)&worklist, &Worklist__Worklist_td.td);
  if (!(i2)) goto l0;
l22:
  ;
}

void LoopTransformation__Region_MoveInvariantCode(Data__Region loop, Data__Region region) {
  register int i0, i1, i2, i3, i4;
  i0 = (int)region == (int)loop;
  if (i0) goto l0;
  i0 = (int)region + 44;
  i0 = *(short int*)i0;
  i0 = i0 == 82;
  if (i0) goto l5;
l0:
  i3 = (int)region + 56;
  i0 = (int)*(void**)i3;
  i3 = i0 == 0;
  if (i3) goto l5;
  i4 = (int)loop + 32;
l1:
  i2 = *(int*)(i0-4);
  i3 = _type_test(i2, &Data__RegionDesc_td.td, 5);
  i1 = i0 + 36;
  i1 = (int)*(void**)i1;
  if (i3) goto l3;
  i3 = i0 + 8;
  i3 = *(int*)i3;
  i3 = i3 != 0;
  if (i3) goto l4;
  i3 = i0 + 44;
  i3 = *(short int*)i3;
  i3 = i3 == 19;
  if (i3) goto l2;
  i2 = (int)*(void**)i4;
  Data__RegionDesc_MoveInstruction((Data__Region)i2, (Data__Instruction)i0);
  goto l4;
l2:
  i3 = i0 + 28;
  i3 = (int)*(void**)i3;
  i2 = (int)((_Type)i2)->tbprocs[1];
  i3 = (int)*(void**)i3;
  ((void(*)(Data__Usable, Data__Usable))i2)((Data__Usable)i0, (Data__Usable)i3);
  goto l4;
l3:
  LoopTransformation__Region_MoveInvariantCode((Data__Region)(int)loop, (Data__Region)i0);
l4:
  i3 = i1 != 0;
  if (!(i3)) goto l5;
  i0 = i1;
  goto l1;
l5:
  ;
}

void LoopTransformation__Region(Data__Region region) {
  register int i0, i1;
  i0 = (int)region + 64;
  i0 = (int)*(void**)i0;
  i1 = i0 == 0;
  if (i1) goto l1;
l0:
  i1 = i0 + 8;
  *(int*)i1 = 2;
  i1 = i0 + 68;
  LoopTransformation__Region((Data__Region)i0);
  i0 = (int)*(void**)i1;
  i1 = i0 != 0;
  if (i1) goto l0;
l1:
  i0 = (int)region + 44;
  i0 = *(short int*)i0;
  i0 = i0 != 82;
  if (i0) goto l2;
  LoopTransformation__AnalyseLoop((Data__Region)(int)region);
  LoopTransformation__Region_MoveInvariantCode((Data__Region)(int)region, (Data__Region)(int)region);
l2:
  ;
}

void LoopTransformation__GlobalRegion(Data__Region greg) {
  Data__RegionDesc_ClearInfo((Data__Region)(int)greg, (int)0);
  Data__GlobalRegionDesc_NumberDominanceTree((Data__GlobalRegion)(int)greg);
  LoopTransformation__Region((Data__Region)(int)greg);
}

void LoopTransformation_init(void) {
  _mid = _register_module(&LoopTransformation_md.md, NULL);
}
