/* file generated by oo2c -- do not edit */
#include "__oo2c.h"
#include "__libc.h"
#include "Make.d"

static _ModId _mid;

Make__Module Make__AddModule(Make__Module *modList, unsigned char* moduleName, int moduleName_0d, unsigned char* fileName, int fileName_0d) {
  register int i0, i1, i2, i3;
  i0 = (int)*modList;
  i1 = i0 == 0;
  if (i1) goto l1;
  i3 = i0 + 4;
  i3 = (int)*(void**)i3;
  i3 = strcmp((const char*) i3, (const char*) (int)moduleName) == 0;
  if (i3) goto l0;
  i3 = (int)*(void**)i0;
  i3 = (int)Make__AddModule((Make__Module *)i0, (unsigned char*)(int)moduleName, moduleName_0d, (unsigned char*)(int)fileName, fileName_0d);
  goto l2;
l0:
  i3 = i0;
  goto l2;
l1:
  {
    char *_mem, *_var;
    _mem = GC_malloc(_not_zero(32)+8);
    if (!_mem) _new_failed(_P(3943));
    _var = _mem+8;
    ((_Type*)_var)[-1] = &Make__ModuleDesc_td.td;
    i3 = (int)_var;
  }
  *modList = (void*)i3;
  i3 = (int)*modList;
  *(void**)i3 = (void*)0;
  i3 = (int)*modList;
  i2 = Strings__Length((const unsigned char*)(int)moduleName, moduleName_0d);
  i1 = i2 + 1;
  i2 = i3 + 4;
  {
    char *_mem, *_var;
    int* _dim_ptr;
    if(i1 < 0) _invalid_length(i1, _P(4039));
    _mem = GC_malloc_atomic(_not_zero(i1*1)+8);
    if (!_mem) _new_failed(_P(3992));
    _var = _mem+8;
    _dim_ptr = (void*)(_var-4);
    *(--_dim_ptr) = i1;
    i1 = (int)_var;
  }
  *(void**)i2 = (void*)i1;
  i3 = (int)*modList;
  i2 = i3 + 4;
  i1 = (int)*(void**)i2;
  i2 = *(int*)(i1-8);
  _string_copy(i1, (int)moduleName, i2);
  i2 = Strings__Length((const unsigned char*)(int)fileName, fileName_0d);
  i1 = i2 + 1;
  i2 = i3 + 8;
  {
    char *_mem, *_var;
    int* _dim_ptr;
    if(i1 < 0) _invalid_length(i1, _P(4140));
    _mem = GC_malloc_atomic(_not_zero(i1*1)+8);
    if (!_mem) _new_failed(_P(4091));
    _var = _mem+8;
    _dim_ptr = (void*)(_var-4);
    *(--_dim_ptr) = i1;
    i1 = (int)_var;
  }
  *(void**)i2 = (void*)i1;
  i3 = (int)*modList;
  i2 = i3 + 8;
  i2 = (int)*(void**)i2;
  i0 = i3 + 12;
  i1 = *(int*)(i2-8);
  _string_copy(i2, (int)fileName, i1);
  *(unsigned int*)i0 = 0x0U;
  i2 = (int)*modList;
  i3 = i2 + 16;
  *(void**)i3 = (void*)0;
  i3 = (int)*modList;
  i2 = i3 + 20;
  *(void**)i2 = (void*)0;
  i3 = (int)*modList;
l2:
  return (void*)i3;
}

unsigned char Make__AddImport_SystemModule(unsigned char* name, int name_0d) {
  register int i0;
  i0 = strcmp((const char*) (int)name, (const char*) (int)_c0) == 0;
  return (unsigned char)i0;
}

void Make__AddImport(Make__Module *modList, Make__Import *importList, unsigned char* import, int import_0d, int pos, unsigned char hasMagic, int magic) {
  register int i0, i1, i2;
  unsigned char empty[2];
  i0 = Make__AddImport_SystemModule((unsigned char*)(int)import, import_0d);
  if (i0) goto l2;
  i2 = (int)*importList;
  i1 = i2 == 0;
  if (i1) goto l1;
  i0 = i2 + 4;
  i0 = (int)*(void**)i0;
  i0 += 4;
  i0 = (int)*(void**)i0;
  i0 = strcmp((const char*) i0, (const char*) (int)import) != 0;
  if (i0) goto l0;
  i0 = i2 + 12;
  *(unsigned char*)i0 = hasMagic;
  i1 = (int)*importList;
  i0 = i1 + 8;
  *(int*)i0 = magic;
  goto l2;
l0:
  i0 = (int)*(void**)i2;
  Make__AddImport((Make__Module *)(int)(int)modList, (Make__Import *)i2, (unsigned char*)(int)import, import_0d, (int)pos, (unsigned char)hasMagic, (int)magic);
  goto l2;
l1:
  {
    char *_mem, *_var;
    _mem = GC_malloc(_not_zero(20)+8);
    if (!_mem) _new_failed(_P(5152));
    _var = _mem+8;
    ((_Type*)_var)[-1] = &Make__ImportDesc_td.td;
    i0 = (int)_var;
  }
  *importList = (void*)i0;
  i0 = (int)*importList;
  *(void**)i0 = (void*)0;
  i0 = (int)*importList;
  (void)memcpy((void*) (int)empty, (const void*) (int)_c1, 1);
  i1 = (int)*modList;
  i2 = (int)Make__AddModule((Make__Module *)(int)(int)modList, (unsigned char*)(int)import, import_0d, (unsigned char*)(int)empty, 2);
  i1 = i0 + 4;
  *(void**)i1 = (void*)i2;
  i0 = (int)*importList;
  i1 = i0 + 12;
  *(unsigned char*)i1 = hasMagic;
  i1 = (int)*importList;
  i0 = i1 + 8;
  *(int*)i0 = magic;
  i1 = (int)*importList;
  i0 = i1 + 16;
  *(int*)i0 = pos;
l2:
  ;
}

void Make__NameMismatch(const unsigned char* import__ref, int import_0d, const unsigned char* header__ref, int header_0d) {
  unsigned char msg[256];
  unsigned char* import;
  unsigned char* header;
  char* _old_top_vs = _top_vs;
  _push_value(int, import, import__ref, import_0d);
  _push_value(int, header, header__ref, header_0d);
  (void)memcpy((void*) (int)msg, (const void*) (int)_c2, 21);
  Strings__Append((const unsigned char*)(int)import, import_0d, (unsigned char*)(int)msg, 256);
  Strings__Append((const unsigned char*)(int)_c3, 15, (unsigned char*)(int)msg, 256);
  Strings__Append((const unsigned char*)(int)header, header_0d, (unsigned char*)(int)msg, 256);
  Strings__Append((const unsigned char*)(int)_c4, 2, (unsigned char*)(int)msg, 256);
  Parameter__FatalError((const unsigned char*)(int)msg, 256);
  _top_vs = _old_top_vs;
}

unsigned char Make__ImportChanged(Make__Module mod) {
  register int i0, i1, i2;
  i0 = (int)mod + 16;
  i1 = (int)*(void**)i0;
  i0 = i1 != 0;
  if (i0) goto l0;
  i2 = 0;
  goto l2;
l0:
  i0 = i1 + 4;
  i0 = (int)*(void**)i0;
  i2 = i0 + 24;
  i0 = i1 + 8;
  i2 = *(int*)i2;
  i0 = *(int*)i0;
  i2 = i0 != i2;
  if (i2) goto l1;
  i0 = (int)*(void**)i1;
  i1 = i0;
l1:
  if (i2) goto l2;
  i0 = i1 != 0;
  if (i0) goto l0;
l2:
  return (unsigned char)i2;
}

void Make__ScanSymbolFile_ReadImportList(BinaryRider__Reader *Make__ScanSymbolFile_r, Make__Module *Make__ScanSymbolFile_moduleList, Make__Module *Make__ScanSymbolFile_mod) {
  register int i0, i1, i2, i3, i4, i5, i6, i7, i8;
  int magic;
  i1 = 0;
l0:
  i3 = (int)*Make__ScanSymbolFile_r;
  i0 = (int)SymbolFile__ReadString((BinaryRider__Reader)i3);
  i8 = strcmp((const char*) i0, (const char*) (int)_c1) == 0;
  if (i8) goto l1;
  i7 = (int)*Make__ScanSymbolFile_r;
  i6 = *(int*)(i7-4);
  i6 = (int)((_Type)i6)->tbprocs[13];
  magic = (int)i2;
  magic = (int)i2;
  ((_TBP_BinaryRider__ReaderDesc_ReadLInt)i6)((BinaryRider__Reader)i7, (int *)(int)&magic);
  i6 = (int)*Make__ScanSymbolFile_mod;
  i5 = i6 + 16;
  i3 = *(int*)(i0-8);
  i4 = (int)*(void**)i5;
  i7 = (int)*Make__ScanSymbolFile_moduleList;
  Make__AddImport((Make__Module *)(int)(int)Make__ScanSymbolFile_moduleList, (Make__Import *)i5, (unsigned char*)i0, i3, (int)-1, (unsigned char)1, (int)magic);
  i2 = magic;
l1:
  if (!(i8)) goto l0;
  i1++;
  i8 = i1 <= 1;
  if (i8) goto l0;
}

void Make__ScanSymbolFile(Make__Module *moduleList, Files__File f, Make__Module mod) {
  register int i0, i1, i2, i3, i4, i5, i6;
  int fileFormat;
  int fileVersion;
  BinaryRider__Reader r;
  unsigned char symId[5];
  i5 = (int)BinaryRider__ConnectReader((Channel__Channel)(int)f);
  i4 = *(int*)(i5-4);
  (void)memcpy((void*) (int)symId, (const void*) (int)_c5, 5);
  i0 = (int)((_Type)i4)->tbprocs[4];
  ((_TBP_BinaryRider__ReaderDesc_ReadBytes)i0)((BinaryRider__Reader)i5, (unsigned char*)(int)symId, 5, (int)0, (int)4);
  i0 = strcmp((const char*) (int)symId, (const char*) (int)SymbolFile__symbolFileId) != 0;
  if (i0) goto l3;
  i3 = (int)mod + 4;
  i6 = (int)*(void**)i3;
  i2 = (int)mod + 20;
  i1 = *(int*)(i6-8);
  i1 = (int)SymbolTable__NewModule((const unsigned char*)i6, i1, (int)-1);
  i6 = (int)mod + 24;
  *(void**)i2 = (void*)i1;
  i1 = (int)((_Type)i4)->tbprocs[13];
  i4 = *(int*)i6;
  ((_TBP_BinaryRider__ReaderDesc_ReadLInt)i1)((BinaryRider__Reader)i5, (int *)i6);
  i1 = (int)*(void**)i2;
  i4 = i1 + 52;
  i4 = (int)*(void**)i4;
  i0 = *(int*)i6;
  i6 = i4 + 24;
  *(int*)i6 = i0;
  i4 = (int)SymbolFile__ReadString((BinaryRider__Reader)i5);
  i3 = (int)*(void**)i3;
  i6 = (int)*(void**)i2;
  i2 = i1 + 20;
  *(void**)i2 = (void*)i4;
  i2 = i6 + 20;
  i1 = (int)*(void**)i2;
  i2 = strcmp((const char*) i3, (const char*) i1) == 0;
  if (i2) goto l0;
  i4 = *(int*)(i3-8);
  i2 = *(int*)(i1-8);
  Make__NameMismatch((const unsigned char*)i3, i4, (const unsigned char*)i1, i2);
l0:
  r = (void*)i5;
  r = (void*)i5;
  Make__ScanSymbolFile_ReadImportList((BinaryRider__Reader *)&r, (Make__Module *)&*moduleList, (Make__Module *)&mod);
  i3 = *(int*)((int)r-4);
  i2 = (int)((_Type)i3)->tbprocs[14];
  ((_TBP_BinaryRider__ReaderDesc_ReadNum)i2)((BinaryRider__Reader)(int)r, (int *)(int)&fileFormat);
  i3 = fileFormat != 1;
  ((_TBP_BinaryRider__ReaderDesc_ReadNum)i2)((BinaryRider__Reader)(int)r, (int *)(int)&fileVersion);
  i4 = (int)mod + 12;
  if (i3) goto l1;
  i3 = fileVersion != 4;
  if (i3) goto l1;
  i6 = (int)mod + 20;
  i2 = (int)*(void**)i6;
  i1 = i2 + 64;
  i2 = *(unsigned int*)i1;
  SymbolFile__ReadFlags((BinaryRider__Reader)(int)r, (unsigned int *)i1);
  i2 = (int)*(void**)i6;
  i2 += 68;
  i1 = *(unsigned int*)i2;
  SymbolFile__ReadFlags((BinaryRider__Reader)(int)r, (unsigned int *)i2);
  i2 = (int)*(void**)i6;
  i6 = i2 + 64;
  i6 = *(unsigned int*)i6;
  i6 = (i6 & ((unsigned int)1 << 3)) != 0;
  if (!(i6)) goto l2;
  SystemFlags__ReadObjectInfo((BinaryRider__Reader)(int)r, (Data__Object)i2);
  goto l2;
l1:
  i3 = *(unsigned int*)i4;
  i3 = i3 | ((unsigned int)1 << 4);
  *(unsigned int*)i4 = i3;
l2:
  i3 = *(unsigned int*)i4;
  i3 = i3 | ((unsigned int)1 << 1);
  *(unsigned int*)i4 = i3;
  goto l4;
l3:
  i1 = (int)mod + 12;
  i0 = *(unsigned int*)i1;
  i0 = i0 | ((unsigned int)1 << 4);
  *(unsigned int*)i1 = i0;
l4:
  ;
}

void Make__ScanSources_ImportList_GetModuleIdent(void) {
  Scanner__moduleIdent = 1;
  Scanner__GetSym();
  Scanner__moduleIdent = 0;
}

void Make__ScanSources_ImportList(Make__Module *Make__ScanSources_mod, Make__Module *Make__ScanSources_moduleList) {
  register int i0, i1, i2, i3, i4;
  unsigned char modId[1024];
  Make__ScanSources_ImportList_GetModuleIdent();
l0:
  i4 = Scanner__sym;
  i4 = i4 == 38;
  if (i4) goto l1;
  i4 = Scanner__currSymPos;
  Error__Err((int)i4, (short int)100);
  goto l6;
l1:
  i0 = (int)Scanner__str;
  _string_copy((int)modId, i0, 1024);
  i0 = Scanner__currSymPos;
  Scanner__GetSym();
  i1 = Scanner__sym;
  i1 = i1 == 34;
  if (i1) goto l2;
  i3 = i0;
  goto l4;
l2:
  Make__ScanSources_ImportList_GetModuleIdent();
  i3 = Scanner__sym;
  i3 = i3 == 38;
  if (i3) goto l3;
  i3 = Scanner__currSymPos;
  Error__Err((int)i3, (short int)100);
  i3 = i0;
  goto l4;
l3:
  i3 = (int)Scanner__str;
  _string_copy((int)modId, i3, 1024);
  i3 = Scanner__currSymPos;
  Scanner__GetSym();
l4:
  i2 = (int)*Make__ScanSources_mod;
  i0 = i2 + 4;
  i0 = (int)*(void**)i0;
  i0 = strcmp((const char*) (int)modId, (const char*) i0) == 0;
  if (i0) goto l5;
  i1 = i2 + 16;
  i0 = (int)*(void**)i1;
  i4 = (int)*Make__ScanSources_moduleList;
  Make__AddImport((Make__Module *)(int)(int)Make__ScanSources_moduleList, (Make__Import *)i1, (unsigned char*)(int)modId, 1024, (int)i3, (unsigned char)0, (int)0);
  goto l6;
l5:
  Error__Err((int)i3, (short int)306);
l6:
  i4 = Scanner__sym;
  i4 = i4 != 19;
  if (i4) goto l7;
  Make__ScanSources_ImportList_GetModuleIdent();
l7:
  if (!(i4)) goto l0;
  Scanner__CheckSym((signed char)39);
}

unsigned char Make__ScanSources(Make__Module *moduleList, Make__Module mod) {
  register int i0, i1, i2, i3;
  i1 = (int)mod + 8;
  Error__Init();
  i2 = (int)*(void**)i1;
  i0 = *(int*)(i2-8);
  Scanner__Init((const unsigned char*)i2, i0, (unsigned char)1);
  i0 = (int)Error__sourceFile;
  i2 = (int)*(void**)i1;
  i2 = strcmp((const char*) i2, (const char*) i0) == 0;
  if (i2) goto l0;
  i2 = *(int*)(i0-8);
  i0 = Strings__Length((const unsigned char*)i0, i2);
  i0++;
  {
    char *_mem, *_var;
    int* _dim_ptr;
    if(i0 < 0) _invalid_length(i0, _P(10271));
    _mem = GC_malloc_atomic(_not_zero(i0*1)+8);
    if (!_mem) _new_failed(_P(10217));
    _var = _mem+8;
    _dim_ptr = (void*)(_var-4);
    *(--_dim_ptr) = i0;
    i0 = (int)_var;
  }
  *(void**)i1 = (void*)i0;
  i1 = (int)*(void**)i1;
  i2 = (int)Error__sourceFile;
  i0 = *(int*)(i1-8);
  _string_copy(i1, i2, i0);
l0:
  SymbolTable__Init();
  Scanner__moduleIdent = 1;
  Scanner__CheckSym((signed char)63);
  Scanner__moduleIdent = 0;
  i0 = Error__noerr;
  if (!(i0)) goto l6;
  i2 = Scanner__sym;
  i2 = i2 == 38;
  if (i2) goto l1;
  i2 = Scanner__currSymPos;
  Error__Err((int)i2, (short int)100);
  goto l6;
l1:
  i0 = (int)mod + 4;
  i1 = (int)*(void**)i0;
  i3 = strcmp((const char*) i1, (const char*) (int)_c1) == 0;
  if (i3) goto l2;
  i3 = (int)Scanner__str;
  i2 = strcmp((const char*) i1, (const char*) i3) == 0;
  if (i2) goto l3;
  i2 = *(int*)(i1-8);
  i0 = *(int*)(i3-8);
  Make__NameMismatch((const unsigned char*)i1, i2, (const unsigned char*)i3, i0);
  goto l3;
l2:
  i1 = (int)Scanner__str;
  i3 = *(int*)(i1-8);
  i3 = Strings__Length((const unsigned char*)i1, i3);
  i3++;
  {
    char *_mem, *_var;
    int* _dim_ptr;
    if(i3 < 0) _invalid_length(i3, _P(10688));
    _mem = GC_malloc_atomic(_not_zero(i3*1)+8);
    if (!_mem) _new_failed(_P(10643));
    _var = _mem+8;
    _dim_ptr = (void*)(_var-4);
    *(--_dim_ptr) = i3;
    i3 = (int)_var;
  }
  *(void**)i0 = (void*)i3;
  i3 = (int)*(void**)i0;
  i0 = (int)Scanner__str;
  i1 = *(int*)(i3-8);
  _string_copy(i3, i0, i1);
l3:
  i0 = (int)Scanner__str;
  i2 = (int)mod + 20;
  i3 = *(int*)(i0-8);
  i1 = Scanner__currSymPos;
  i0 = (int)SymbolTable__NewModule((const unsigned char*)i0, i3, (int)i1);
  *(void**)i2 = (void*)i0;
  i0 = (int)*(void**)i2;
  SymbolTable__OpenScope((Data__Object)i0, (short int)0, (short int)0);
  Scanner__GetSym();
  i0 = (int)*(void**)i2;
  SystemFlags__ObjectModifiers((Data__Object)i0, (unsigned char)1);
  Scanner__CheckSym((signed char)39);
  i0 = Scanner__sym;
  i0 = i0 == 62;
  if (i0) goto l4;
  i0 = (int)mod;
  goto l5;
l4:
  Scanner__sym = (signed char)62;
  Make__ScanSources_ImportList((Make__Module *)&mod, (Make__Module *)&*moduleList);
  i0 = (int)mod;
l5:
  i3 = Error__noerr;
  SymbolTable__CloseScope((unsigned char)i3);
  i3 = i0 + 20;
  i1 = (int)*(void**)i3;
  i3 = i0 + 12;
  SystemFlags__ObjectModifiers((Data__Object)i1, (unsigned char)0);
  i1 = *(unsigned int*)i3;
  i1 = i1 | ((unsigned int)1 << 2);
  *(unsigned int*)i3 = i1;
l6:
  Scanner__Close();
  Error__EmitErrors((unsigned char)0);
  i0 = Error__noerr;
  return (unsigned char)i0;
}

unsigned char Make__ScanModule(Make__Module *moduleList, Make__Module mod, unsigned char useSources) {
  register int i0, i1, i2, i3, i4, i5;
  Parameter__Filename fileName;
  Time__TimeStamp lastCompilation;
  Msg__Msg res;
  Time__TimeStamp sourceStamp;
  i1 = (int)mod + 8;
  i3 = (int)*(void**)i1;
  i2 = strcmp((const char*) i3, (const char*) (int)_c1) == 0;
  i0 = (int)mod + 4;
  if (i2) goto l0;
  i2 = *(int*)(i3-8);
  i2 = Files__Exists((const unsigned char*)i3, i2);
  goto l1;
l0:
  i4 = (int)*(void**)i0;
  _string_copy((int)fileName, i4, 256);
  Scanner__Name2File((unsigned char*)(int)fileName, 256);
  i2 = ParamPaths__FindPathExt((const unsigned char*)(int)fileName, 256, (const unsigned char*)(int)_c6, 4, (unsigned char)0, (unsigned char*)(int)fileName, 256);
  if (!(i2)) goto l1;
  i3 = Strings__Length((const unsigned char*)(int)fileName, 256);
  i3++;
  {
    char *_mem, *_var;
    int* _dim_ptr;
    if(i3 < 0) _invalid_length(i3, _P(12771));
    _mem = GC_malloc_atomic(_not_zero(i3*1)+8);
    if (!_mem) _new_failed(_P(12726));
    _var = _mem+8;
    _dim_ptr = (void*)(_var-4);
    *(--_dim_ptr) = i3;
    i3 = (int)_var;
  }
  *(void**)i1 = (void*)i3;
  i4 = (int)*(void**)i1;
  i3 = *(int*)(i4-8);
  _string_copy(i4, (int)fileName, i3);
l1:
  i3 = (int)mod + 12;
  if (!(i2)) goto l2;
  i4 = *(unsigned int*)i3;
  i4 = i4 | ((unsigned int)1 << 3);
  *(unsigned int*)i3 = i4;
l2:
  i4 = (int)*(void**)i0;
  i5 = strcmp((const char*) i4, (const char*) (int)_c1) == 0;
  if (i5) goto l3;
  if (!(useSources)) goto l4;
  if (!(i2)) goto l4;
l3:
  i5 = 0;
  goto l10;
l4:
  i5 = *(int*)(i4-8);
  i4 = ParamPaths__FindPathExt((const unsigned char*)i4, i5, (const unsigned char*)(int)_c7, 4, (unsigned char)0, (unsigned char*)(int)fileName, 256);
  if (i4) goto l5;
  i5 = 0;
  goto l10;
l5:
  Files__GetModTime((const unsigned char*)(int)fileName, 256, (Time__TimeStamp *)(int)&lastCompilation, &Time__TimeStamp_td.td, (Msg__Msg *)(int)&res);
  i5 = (int)res == 0;
  if (i5) goto l6;
  i5 = 0;
  goto l10;
l6:
  if (i2) goto l7;
  res = (void*)0;
  res = (void*)0;
  i5 = (int)Files__Old((const unsigned char*)(int)fileName, 256, (unsigned int)0x1U, (Msg__Msg *)(int)&res);
  goto l10;
l7:
  i5 = (int)*(void**)i1;
  i1 = *(int*)(i5-8);
  res = (void*)0;
  res = (void*)0;
  Files__GetModTime((const unsigned char*)i5, i1, (Time__TimeStamp *)(int)&sourceStamp, &Time__TimeStamp_td.td, (Msg__Msg *)(int)&res);
  i1 = (int)res != 0;
  if (i1) goto l8;
  i5 = (int)((_Type)&Time__TimeStamp_td.td)->tbprocs[3];
  i5 = ((_TBP_Time__TimeStamp_Cmp)i5)((Time__TimeStamp *)(int)&lastCompilation, &Time__TimeStamp_td.td, (const Time__TimeStamp *)(int)&sourceStamp);
  i5 = i5 > 0;
  if (i5) goto l9;
l8:
  i5 = 0;
  goto l10;
l9:
  res = (void*)0;
  res = (void*)0;
  i5 = (int)Files__Old((const unsigned char*)(int)fileName, 256, (unsigned int)0x1U, (Msg__Msg *)(int)&res);
l10:
  i1 = i5 != 0;
  if (i1) goto l13;
  i0 = (int)*(void**)i0;
  i0 = strcmp((const char*) i0, (const char*) (int)_c1) == 0;
  if (i0) goto l11;
  if (!(i2)) goto l12;
l11:
  i1 = *(unsigned int*)i3;
  i1 = i1 | ((unsigned int)1 << 4);
  *(unsigned int*)i3 = i1;
  i1 = (int)*moduleList;
  i1 = Make__ScanSources((Make__Module *)(int)(int)moduleList, (Make__Module)(int)mod);
  goto l14;
l12:
  i2 = *(unsigned int*)i3;
  i2 = i2 | ((unsigned int)1 << 5);
  *(unsigned int*)i3 = i2;
  i1 = 1;
  goto l14;
l13:
  i0 = (int)*moduleList;
  i1 = *(int*)(i5-4);
  Make__ScanSymbolFile((Make__Module *)(int)(int)moduleList, (Files__File)i5, (Make__Module)(int)mod);
  i1 = (int)((_Type)i1)->tbprocs[5];
  ((_TBP_Files__FileDesc_Close)i1)((Files__File)i5);
  i1 = 1;
l14:
  i0 = *(unsigned int*)i3;
  i0 = i0 | ((unsigned int)1 << 0);
  *(unsigned int*)i3 = i0;
  ParamPragmas__Restore((ParamPragmas__PragmaState *)(int)&Make__pragmas, &ParamPragmas__PragmaState_td.td);
  return (unsigned char)i1;
}

Make__Module Make__TopSort_RemoveBest(Make__Module *mod, short int prevBest, Make__Module *Make__TopSort_modules) {
  register int i0, i1, i2;
  i1 = (int)*mod;
  i0 = i1 == 0;
  if (i0) goto l1;
  i0 = i1 + 28;
  i0 = *(short int*)i0;
  i2 = prevBest > i0;
  if (i2) goto l0;
  i2 = (int)*(void**)i1;
  i2 = (int)Make__TopSort_RemoveBest((Make__Module *)i1, (short int)prevBest, (Make__Module *)&*Make__TopSort_modules);
  goto l2;
l0:
  i1 = (int)*Make__TopSort_modules;
  i2 = (int)*(void**)i1;
  i2 = (int)Make__TopSort_RemoveBest((Make__Module *)i1, (short int)i0, (Make__Module *)&*Make__TopSort_modules);
  i1 = i2 != 0;
  if (i1) goto l2;
  i2 = (int)*mod;
  i1 = (int)*(void**)i2;
  *mod = (void*)i1;
  goto l2;
l1:
  i2 = 0;
l2:
  return (void*)i2;
}

void Make__TopSort_ErrorCyclic(Make__Module mod, unsigned char Make__TopSort_msg[8192]) {
  register int i0, i1, i2, i3;
  i0 = (int)mod + 28;
  i0 = *(short int*)i0;
  i0 = i0 == 0;
  if (i0) goto l3;
  i3 = (int)mod + 12;
  i1 = Strings__Length((const unsigned char*)(int)Make__TopSort_msg, 8192);
  i2 = *(unsigned int*)i3;
  i0 = (i2 & ((unsigned int)1 << 6)) != 0;
  if (i0) goto l2;
  i2 = i2 | ((unsigned int)1 << 6);
  *(unsigned int*)i3 = i2;
  Strings__Append((const unsigned char*)(int)_c8, 2, (unsigned char*)(int)Make__TopSort_msg, 8192);
  i2 = (int)mod + 4;
  i2 = (int)*(void**)i2;
  i0 = *(int*)(i2-8);
  Strings__Append((const unsigned char*)i2, i0, (unsigned char*)(int)Make__TopSort_msg, 8192);
  i2 = (int)mod + 16;
  i0 = (int)*(void**)i2;
  i2 = i0 == 0;
  if (i2) goto l1;
l0:
  i2 = i0 + 4;
  i2 = (int)*(void**)i2;
  Make__TopSort_ErrorCyclic((Make__Module)i2, Make__TopSort_msg);
  i0 = (int)*(void**)i0;
  i2 = i0 != 0;
  if (i2) goto l0;
l1:
  i2 = *(unsigned int*)i3;
  i2 = i2 & ~((unsigned int)1 << 6);
  *(unsigned int*)i3 = i2;
  i2 = (int)Make__TopSort_msg + i1;
  *(unsigned char*)i2 = 0;
  goto l3;
l2:
  Parameter__FatalError((const unsigned char*)(int)Make__TopSort_msg, 8192);
l3:
  ;
}

Make__Module Make__TopSort(Make__Module modules, unsigned char mainFirst) {
  register int i0, i1, i2, i3, i4, i5;
  unsigned char msg[8192];
  i4 = (int)modules != 0;
  if (!(i4)) goto l3;
  i3 = (int)modules;
l0:
  i2 = i3 + 28;
  *(short int*)i2 = 0;
  i0 = i3 + 16;
  i1 = (int)*(void**)i0;
  i0 = i1 == 0;
  if (i0) goto l2;
l1:
  i0 = *(short int*)i2;
  i1 = (int)*(void**)i1;
  i0++;
  *(short int*)i2 = i0;
  i0 = i1 != 0;
  if (i0) goto l1;
l2:
  i3 = (int)*(void**)i3;
  i0 = i3 != 0;
  if (i0) goto l0;
l3:
  if (i4) goto l4;
  i3 = 0;
  i5 = 0;
  goto l13;
l4:
  i4 = 0;
  i0 = (int)modules;
l5:
  modules = (void*)i0;
  modules = (void*)i0;
  i5 = (int)Make__TopSort_RemoveBest((Make__Module *)(int)&modules, (short int)32767, (Make__Module *)&modules);
  i0 = i5 + 28;
  *(void**)i5 = (void*)i4;
  i4 = *(short int*)i0;
  i4 = i4 == 0;
  if (i4) goto l6;
  (void)memcpy((void*) (int)msg, (const void*) (int)_c9, 18);
  Make__TopSort_ErrorCyclic((Make__Module)i5, msg);
l6:
  i2 = (int)modules != 0;
  if (!(i2)) goto l11;
  i1 = (int)modules;
l7:
  i3 = i1 + 16;
  i0 = (int)*(void**)i3;
  i3 = i0 == 0;
  if (i3) goto l10;
  i3 = i1 + 28;
l8:
  i4 = i0 + 4;
  i4 = (int)*(void**)i4;
  i4 = i5 != i4;
  if (i4) goto l9;
  i4 = *(short int*)i3;
  i4--;
  *(short int*)i3 = i4;
l9:
  i0 = (int)*(void**)i0;
  i4 = i0 != 0;
  if (i4) goto l8;
l10:
  i1 = (int)*(void**)i1;
  i3 = i1 != 0;
  if (i3) goto l7;
l11:
  if (!(i2)) goto l12;
  i4 = i5;
  i0 = (int)modules;
  goto l5;
l12:
  i3 = (int)modules;
l13:
  if (mainFirst) goto l17;
  i2 = i5 != 0;
  if (i2) goto l14;
  i4 = i3;
  goto l16;
l14:
  i1 = i3;
  i4 = i5;
l15:
  i0 = (int)*(void**)i4;
  i2 = i0 == 0;
  *(void**)i4 = (void*)i1;
  if (i2) goto l16;
  i1 = i4;
  i4 = i0;
  goto l15;
l16:
  i5 = i4;
l17:
  return (void*)i5;
}

unsigned char Make__Dependencies_ImportsUnknown(Make__Module mod) {
  register int i0, i1, i2;
  i0 = (int)mod + 16;
  i1 = (int)*(void**)i0;
  i0 = i1 != 0;
  if (i0) goto l0;
  i2 = 0;
  goto l2;
l0:
  i0 = i1 + 4;
  i0 = (int)*(void**)i0;
  i0 += 12;
  i0 = *(unsigned int*)i0;
  i2 = (i0 & ((unsigned int)1 << 5)) != 0;
  if (i2) goto l1;
  i0 = (int)*(void**)i1;
  i1 = i0;
l1:
  if (i2) goto l2;
  i0 = i1 != 0;
  if (i0) goto l0;
l2:
  return (unsigned char)i2;
}

void Make__Dependencies_MarkUnknownImports(Make__Module mod, unsigned char useError) {
  register int i0, i1, i2, i3, i4;
  i0 = (int)mod + 16;
  i3 = (int)*(void**)i0;
  i0 = i3 == 0;
  if (i0) goto l3;
  i4 = (int)mod + 4;
l0:
  i1 = i3 + 4;
  i2 = (int)*(void**)i1;
  i0 = i2 + 12;
  i0 = *(unsigned int*)i0;
  i0 = (i0 & ((unsigned int)1 << 5)) != 0;
  if (!(i0)) goto l2;
  if (useError) goto l1;
  Out__String((const unsigned char*)(int)_c10, 16);
  i0 = (int)*(void**)i4;
  i2 = *(int*)(i0-8);
  Out__String((const unsigned char*)i0, i2);
  Out__String((const unsigned char*)(int)_c11, 27);
  i2 = (int)*(void**)i1;
  i2 += 4;
  i2 = (int)*(void**)i2;
  i1 = *(int*)(i2-8);
  Out__String((const unsigned char*)i2, i1);
  Out__Char((unsigned char)39);
  Out__Ln();
  goto l2;
l1:
  i2 += 4;
  i1 = (int)*(void**)i2;
  i0 = i3 + 16;
  i2 = *(int*)(i1-8);
  i0 = *(int*)i0;
  Error__ErrIns((int)i0, (short int)307, (const unsigned char*)i1, i2);
l2:
  i3 = (int)*(void**)i3;
  i0 = i3 != 0;
  if (i0) goto l0;
l3:
  ;
}

void Make__Dependencies(const unsigned char* fileName__ref, int fileName_0d, unsigned char useSources, Make__Module *modList, unsigned char *err) {
  register int i0, i1, i2, i3;
  unsigned char empty[2];
  unsigned char* fileName;
  char* _old_top_vs = _top_vs;
  _push_value(int, fileName, fileName__ref, fileName_0d);
  ParamPragmas__Save((ParamPragmas__PragmaState *)(int)&Make__pragmas, &ParamPragmas__PragmaState_td.td);
  *modList = (void*)0;
  (void)memcpy((void*) (int)empty, (const void*) (int)_c1, 1);
  i0 = (int)*modList;
  i2 = (int)Make__AddModule((Make__Module *)(int)(int)modList, (unsigned char*)(int)empty, 2, (unsigned char*)(int)fileName, fileName_0d);
  i0 = (int)*modList;
  i1 = Make__ScanModule((Make__Module *)(int)(int)modList, (Make__Module)i2, (unsigned char)useSources);
  if (!(i1)) goto l0;
  if (!(useSources)) goto l1;
l0:
  i3 = i1;
  goto l2;
l1:
  i3 = i2 + 12;
  i0 = *(unsigned int*)i3;
  i0 = i0 & ~((unsigned int)1 << 4);
  *(unsigned int*)i3 = i0;
  i3 = (int)*modList;
  i3 = Make__ScanModule((Make__Module *)(int)(int)modList, (Make__Module)i2, (unsigned char)0);
l2:
  if (i3) goto l3;
  i3 = 0;
  goto l9;
l3:
  i0 = (int)*modList;
  i3 = i0 == 0;
  if (i3) goto l5;
  i3 = i0 + 12;
  i3 = *(unsigned int*)i3;
  i2 = (i3 & ((unsigned int)1 << 0)) != 0;
  if (!(i2)) goto l5;
  i1 = i0;
l4:
  i1 = (int)*(void**)i1;
  i3 = i1 == 0;
  if (i3) goto l6;
  i3 = i1 + 12;
  i3 = *(unsigned int*)i3;
  i3 = (i3 & ((unsigned int)1 << 0)) != 0;
  if (i3) goto l4;
  goto l6;
l5:
  i1 = i0;
l6:
  i3 = i1 != 0;
  if (i3) goto l7;
  i3 = 1;
  goto l8;
l7:
  i3 = Make__ScanModule((Make__Module *)(int)(int)modList, (Make__Module)i1, (unsigned char)useSources);
l8:
  i0 = i1 == 0;
  if (i0) goto l9;
  if (i3) goto l3;
l9:
  if (i3) goto l10;
  i3 = 0;
  goto l18;
l10:
  i2 = (int)*modList;
  i1 = i2 != 0;
  if (i1) goto l11;
  i3 = 1;
  goto l17;
l11:
  i3 = 1;
l12:
  i1 = Make__Dependencies_ImportsUnknown((Make__Module)i2);
  if (!(i1)) goto l16;
  i0 = i2 + 12;
  i3 = *(unsigned int*)i0;
  i1 = (i3 & ((unsigned int)1 << 2)) != 0;
  if (i1) goto l13;
  i3 = (i3 & ((unsigned int)1 << 3)) != 0;
  if (!(i3)) goto l13;
  i3 = (int)*modList;
  i3 = Make__ScanModule((Make__Module *)(int)(int)modList, (Make__Module)i2, (unsigned char)1);
l13:
  i0 = *(unsigned int*)i0;
  i0 = (i0 & ((unsigned int)1 << 2)) != 0;
  if (i0) goto l14;
  Make__Dependencies_MarkUnknownImports((Make__Module)i2, (unsigned char)0);
  goto l15;
l14:
  Error__Init();
  i0 = i2 + 8;
  i0 = (int)*(void**)i0;
  Error__sourceFile = (void*)i0;
  Make__Dependencies_MarkUnknownImports((Make__Module)i2, (unsigned char)1);
  Error__EmitErrors((unsigned char)0);
l15:
  i3 = 0;
l16:
  i2 = (int)*(void**)i2;
  i1 = i2 != 0;
  if (i1) goto l12;
l17:
  if (!(i3)) goto l18;
  i1 = (int)*modList;
  i1 = (int)Make__TopSort((Make__Module)i1, (unsigned char)0);
  *modList = (void*)i1;
l18:
  i0 = ! i3;
  *err = i0;
  _top_vs = _old_top_vs;
}

Make__Module Make__GetModuleInfo(const unsigned char* fileName__ref, int fileName_0d, unsigned char *err) {
  register int i0, i1;
  unsigned char empty[2];
  Make__Module modList;
  unsigned char* fileName;
  char* _old_top_vs = _top_vs;
  _push_value(int, fileName, fileName__ref, fileName_0d);
  (void)memcpy((void*) (int)empty, (const void*) (int)_c1, 1);
  ParamPragmas__Save((ParamPragmas__PragmaState *)(int)&Make__pragmas, &ParamPragmas__PragmaState_td.td);
  modList = (void*)0;
  modList = (void*)0;
  i0 = (int)Make__AddModule((Make__Module *)(int)&modList, (unsigned char*)(int)empty, 2, (unsigned char*)(int)fileName, fileName_0d);
  i1 = Make__ScanModule((Make__Module *)(int)&modList, (Make__Module)i0, (unsigned char)0);
  i1 = ! i1;
  *err = i1;
  _top_vs = _old_top_vs;
  return (void*)i0;
}

void Make__UpdateModuleInfo(Make__Module mod, Data__Object obj, int magic) {
  register int i0;
  i0 = (int)mod + 20;
  *(void**)i0 = (void*)(int)obj;
  i0 = (int)mod + 24;
  *(int*)i0 = magic;
}

void Make_init(void) {
  _mid = _register_module(&Make_md.md, &Make__ModuleDesc_td.td);
}
